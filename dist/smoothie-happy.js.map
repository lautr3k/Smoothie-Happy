{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///smoothie-happy.js","webpack:///webpack/bootstrap 3ea28c5bfc3e7655255c","webpack:///./board/util.js","webpack:///./board/topics/index.js","webpack:///./request/event/types.js","webpack:///./board/commands/index.js","webpack:///./board/request.js","webpack:///./request/index.js","webpack:///../~/uuid/v4.js","webpack:///./index.js","webpack:///./board/board.js","webpack:///./board/command.js","webpack:///./board/commands/M999.js","webpack:///./board/commands/cat.js","webpack:///./board/commands/cd.js","webpack:///./board/commands/get.js","webpack:///./board/commands/get_fk.js","webpack:///./board/commands/get_ik.js","webpack:///./board/commands/get_pos.js","webpack:///./board/commands/get_state.js","webpack:///./board/commands/get_status.js","webpack:///./board/commands/get_temp.js","webpack:///./board/commands/get_wcs.js","webpack:///./board/commands/help.js","webpack:///./board/commands/ls.js","webpack:///./board/commands/mem.js","webpack:///./board/commands/mv.js","webpack:///./board/commands/ok.js","webpack:///./board/commands/pwd.js","webpack:///./board/commands/reset.js","webpack:///./board/commands/rm.js","webpack:///./board/commands/set_temp.js","webpack:///./board/commands/switch.js","webpack:///./board/commands/version.js","webpack:///./board/filetree.js","webpack:///./board/index.js","webpack:///./board/info.js","webpack:///./board/settings.js","webpack:///./request/event/request.js","webpack:///./request/payload/attempt.js","webpack:///./request/payload/progress.js","webpack:///./request/payload/response.js","webpack:///./request/request.js","webpack:///./request/settings.js","webpack:///../~/uuid/lib/bytesToUuid.js","webpack:///../~/uuid/lib/rng-browser.js","webpack:///../~/webpack/buildin/global.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","normalizePath","path","trim","replace","toLowerCase","filename","split","pop","boardTopics","INFO_UPDATE","FILETREE_UPDATE","STATE_HALT","STATE_CLEAR","COMMAND_QUEUE_ADD","COMMAND_QUEUE_SEND","COMMAND_QUEUE_EMPTY","COMMAND_QUEUE_PAUSE","COMMAND_QUEUE_RESUME","COMMAND_QUEUE_CLEAR","COMMAND_CREATE","COMMAND_SEND","COMMAND_ERROR","COMMAND_RESPONSE","COMMAND_RETRY","COMMAND_RETRY_SEND","COMMAND_RETRY_LIMIT","COMMAND_DOWNLOAD_LOAD","COMMAND_DOWNLOAD_ABORT","COMMAND_DOWNLOAD_ERROR","COMMAND_DOWNLOAD_TIMEOUT","COMMAND_DOWNLOAD_PROGRESS","COMMAND_UPLOAD_LOAD","COMMAND_UPLOAD_ABORT","COMMAND_UPLOAD_ERROR","COMMAND_UPLOAD_TIMEOUT","COMMAND_UPLOAD_PROGRESS","REQUEST_RETRY","REQUEST_RETRY_SEND","REQUEST_RETRY_LIMIT","REQUEST_DOWNLOAD_LOAD","REQUEST_DOWNLOAD_ABORT","REQUEST_DOWNLOAD_ERROR","REQUEST_DOWNLOAD_TIMEOUT","REQUEST_DOWNLOAD_PROGRESS","REQUEST_UPLOAD_LOAD","REQUEST_UPLOAD_ABORT","REQUEST_UPLOAD_ERROR","REQUEST_UPLOAD_TIMEOUT","REQUEST_UPLOAD_PROGRESS","default","requestEventTypes","RETRY","RETRY_SEND","RETRY_LIMIT","DOWNLOAD_LOAD","DOWNLOAD_ABORT","DOWNLOAD_ERROR","DOWNLOAD_TIMEOUT","DOWNLOAD_PROGRESS","UPLOAD_LOAD","UPLOAD_ABORT","UPLOAD_ERROR","UPLOAD_TIMEOUT","UPLOAD_PROGRESS","cmd_M999","cmd_version","cmd_switch","cmd_set_temp","cmd_rm","cmd_reset","cmd_pwd","cmd_ok","cmd_mv","cmd_mem","cmd_ls","cmd_help","cmd_get","cmd_cd","cmd_cat","undefined","_cat","_cd","_get","_help","_ls","_mem","_mv","_ok","_pwd","_reset","_rm","_set_temp","_switch","_version","_M","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","writable","setPrototypeOf","__proto__","BoardRequest","_request","_request2","obj","_Request","board","settings","arguments","length","_this","getPrototypeOf","assign","request","url","address","_interopRequireDefault","Request","_types","_types2","v4","options","buf","offset","Array","rnds","random","rng","ii","bytesToUuid","_interopRequireWildcard","newObj","key","VERSION","_board","Board","_createClass","defineProperties","target","props","descriptor","protoProps","staticProps","_v","_v2","_settings","_settings2","_command","_command2","_topics","_topics2","_info","_info2","_filetree","_filetree2","_util","Error","startsWith","endsWith","uuid","info","fileTree","subscriptions","Map","commandQueue","commandQueueLocked","commandQueuePaused","pendingCommand","halted","topic","payload","has","message","forEach","subscription","callback","context","set","removed","isArray","id","unsubscribe","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","values","Symbol","iterator","next","done","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","keys","delete","size","deleteTopic","createRequest","send","command","_this2","on","event","publish","boardCommand","_this3","then","Promise","resolve","catch","reject","_sendCommand","createCommand","push","addCommand","processCommandQueue","_this4","shift","abort","abortPendingCommand","pauseCommandQueue","_this5","refresh","sendCommand","data","_this6","firstCall","tree","list","promises","child","type","listFiles","all","results","_this7","BoardCommand","_commands","boardCommands","_BoardRequest","commandLine","commandArgs","commandName","response","parseResponse","responseParser","r","test","method","filters","raw","args","source","option","func","_get_temp","_get_pos","_get_wcs","_get_state","_get_status","_get_ik","_get_fk","get_fk","move","matches","match","x","parseFloat","y","z","get_ik","get_pos","lines","positions","line","parsePositionString","position","parts","toUpperCase","coords","join","substr","description","get_state","state","slice","modal","wcs","plane_selection","unit","distance_mode","path_control","program_pause","stop_tool","stop_coolant","tool","feed_rate","s_value","get_status","status","machine","workspace","get_temp","device","map","parseTempString","current","pwm","parseInt","temp","designator","get_wcs","code","excludes","files","isDir","extension","rootPath","includes","parent","verbose","memory","CHUNKS","setValue","_line$split","_line$split2","_slicedToArray","bytes","free","chunk","chunks","end","total","used","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","branch","hash","date","mcu","clock","BoardFile","BoardFolder","BoardFileTree","file","folder","updateSize","childPath","makeChild","remove","_board2","BoardInfo","boardSettings","timeout","maxAttempts","attemptDelay","_status","RequestEvent","RequestAttemptPayload","attempts","num","max","delay","RequestProgressPayload","loaded","computable","lengthComputable","percent","RequestResponsePayload","xhr","filter","statusText","_typeof","_progress","_progress2","_response","_response2","_attempt","_attempt2","time","Date","now","sendTime","elapsedTime","aborted","encodeURIComponent","indexOf","encodeData","joinUrlData","XMLHttpRequest","overrideMimeType","mimeType","open","rejected","createEvent","requestEvent","_triggerEvent","_reject","error","onAbort","onError","onTimeout","onProgress","onLoad","onload","onabort","onerror","ontimeout","onprogress","upload","headers","header","setRequestHeader","_send","triggerEvent","BEFORE_RETRY","setTimeout","requestSettings","bth","byteToHex","toString","global","crypto","msCrypto","getRandomValues","rnds8","Uint8Array","Math","g","Function","eval","e","window"],"mappings":"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","file":"smoothie-happy.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"SmoothieHappy\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SmoothieHappy\"] = factory();\n\telse\n\t\troot[\"SmoothieHappy\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"SmoothieHappy\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SmoothieHappy\"] = factory();\n\telse\n\t\troot[\"SmoothieHappy\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 45);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.normalizePath = normalizePath;\nexports.filename = filename;\n/**\n* Return normalized path `sd/My///File.ext/   ` => `/sd/my/file.ext`.\n*\n* @param  {String} path\n* @return {String}\n*/\nfunction normalizePath(path) {\n  return '/' + path.trim().replace(/\\/+/, '/').replace(/^\\/|\\/$/, '').toLowerCase();\n}\n\n/**\n* Return filename from path.\n*\n* @param  {String} path\n* @return {String}\n*/\nfunction filename(path) {\n  return path.split('/').pop();\n}\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n* Board topics.\n*\n* @type {Object<String, String>}\n*/\nvar boardTopics = {\n  INFO_UPDATE: 'info.update', // payload: {BoardInfo}\n  FILETREE_UPDATE: 'filetree.update', // payload: {BoardFileList}\n\n  STATE_HALT: 'state.halt', // payload: {null}\n  STATE_CLEAR: 'state.clear', // payload: {null}\n\n  COMMAND_QUEUE_ADD: 'command.queue.add', // payload: {BoardCommand}\n  COMMAND_QUEUE_SEND: 'command.queue.send', // payload: {BoardCommand}\n  COMMAND_QUEUE_EMPTY: 'command.queue.empty', // payload: {null}\n  COMMAND_QUEUE_PAUSE: 'command.queue.pause', // payload: {Board.commandQueue}\n  COMMAND_QUEUE_RESUME: 'command.queue.resume', // payload: {Board.commandQueue}\n  COMMAND_QUEUE_CLEAR: 'command.queue.clear', // payload: {Board.commandQueue}\n\n  COMMAND_CREATE: 'command.create', // payload: {BoardCommand}\n  COMMAND_SEND: 'command.send', // payload: {BoardCommand}\n  COMMAND_ERROR: 'command.error', // payload: {RequestEvent}\n  COMMAND_RESPONSE: 'command.response', // payload: {RequestEvent}\n\n  // COMMAND_XXX payload: {RequestEvent}\n  COMMAND_RETRY: 'command.retry', // on retry planned\n  COMMAND_RETRY_SEND: 'command.retry.send', // juste before retry\n  COMMAND_RETRY_LIMIT: 'command.retry.limit', // on too many attemps\n\n  COMMAND_DOWNLOAD_LOAD: 'command.download.load',\n  COMMAND_DOWNLOAD_ABORT: 'command.download.abort',\n  COMMAND_DOWNLOAD_ERROR: 'command.download.error',\n  COMMAND_DOWNLOAD_TIMEOUT: 'command.download.timeout',\n  COMMAND_DOWNLOAD_PROGRESS: 'command.download.progress',\n\n  COMMAND_UPLOAD_LOAD: 'command.upload.load',\n  COMMAND_UPLOAD_ABORT: 'command.upload.abort',\n  COMMAND_UPLOAD_ERROR: 'command.upload.error',\n  COMMAND_UPLOAD_TIMEOUT: 'command.upload.timeout',\n  COMMAND_UPLOAD_PROGRESS: 'command.upload.progress',\n\n  // REQUEST_XXX payload: {RequestEvent}\n  REQUEST_RETRY: 'request.retry', // on retry planned\n  REQUEST_RETRY_SEND: 'request.retry.send', // juste before retry\n  REQUEST_RETRY_LIMIT: 'request.retry.limit', // on too many attemps\n\n  REQUEST_DOWNLOAD_LOAD: 'request.download.load',\n  REQUEST_DOWNLOAD_ABORT: 'request.download.abort',\n  REQUEST_DOWNLOAD_ERROR: 'request.download.error',\n  REQUEST_DOWNLOAD_TIMEOUT: 'request.download.timeout',\n  REQUEST_DOWNLOAD_PROGRESS: 'request.download.progress',\n\n  REQUEST_UPLOAD_LOAD: 'request.upload.load',\n  REQUEST_UPLOAD_ABORT: 'request.upload.abort',\n  REQUEST_UPLOAD_ERROR: 'request.upload.error',\n  REQUEST_UPLOAD_TIMEOUT: 'request.upload.timeout',\n  REQUEST_UPLOAD_PROGRESS: 'request.upload.progress'\n};\n\nexports.default = boardTopics;\nexports.boardTopics = boardTopics;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n* Request event types.\n*\n* @type {Object<String, String>}\n*/\nvar requestEventTypes = {\n  RETRY: 'retry', // on retry planned\n  RETRY_SEND: 'retry.send', // juste before retry\n  RETRY_LIMIT: 'retry.limit', // on too many attemps\n\n  DOWNLOAD_LOAD: 'download.load',\n  DOWNLOAD_ABORT: 'download.abort',\n  DOWNLOAD_ERROR: 'download.error',\n  DOWNLOAD_TIMEOUT: 'download.timeout',\n  DOWNLOAD_PROGRESS: 'download.progress',\n\n  UPLOAD_LOAD: 'upload.load',\n  UPLOAD_ABORT: 'upload.abort',\n  UPLOAD_ERROR: 'upload.error',\n  UPLOAD_TIMEOUT: 'upload.timeout',\n  UPLOAD_PROGRESS: 'upload.progress'\n};\n\nexports.default = requestEventTypes;\nexports.requestEventTypes = requestEventTypes;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cmd_M999 = exports.cmd_version = exports.cmd_switch = exports.cmd_set_temp = exports.cmd_rm = exports.cmd_reset = exports.cmd_pwd = exports.cmd_ok = exports.cmd_mv = exports.cmd_mem = exports.cmd_ls = exports.cmd_help = exports.cmd_get = exports.cmd_cd = exports.cmd_cat = undefined;\n\nvar _cat = __webpack_require__(11);\n\nObject.defineProperty(exports, 'cmd_cat', {\n  enumerable: true,\n  get: function get() {\n    return _cat.cmd_cat;\n  }\n});\n\nvar _cd = __webpack_require__(12);\n\nObject.defineProperty(exports, 'cmd_cd', {\n  enumerable: true,\n  get: function get() {\n    return _cd.cmd_cd;\n  }\n});\n\nvar _get = __webpack_require__(13);\n\nObject.defineProperty(exports, 'cmd_get', {\n  enumerable: true,\n  get: function get() {\n    return _get.cmd_get;\n  }\n});\n\nvar _help = __webpack_require__(21);\n\nObject.defineProperty(exports, 'cmd_help', {\n  enumerable: true,\n  get: function get() {\n    return _help.cmd_help;\n  }\n});\n\nvar _ls = __webpack_require__(22);\n\nObject.defineProperty(exports, 'cmd_ls', {\n  enumerable: true,\n  get: function get() {\n    return _ls.cmd_ls;\n  }\n});\n\nvar _mem = __webpack_require__(23);\n\nObject.defineProperty(exports, 'cmd_mem', {\n  enumerable: true,\n  get: function get() {\n    return _mem.cmd_mem;\n  }\n});\n\nvar _mv = __webpack_require__(24);\n\nObject.defineProperty(exports, 'cmd_mv', {\n  enumerable: true,\n  get: function get() {\n    return _mv.cmd_mv;\n  }\n});\n\nvar _ok = __webpack_require__(25);\n\nObject.defineProperty(exports, 'cmd_ok', {\n  enumerable: true,\n  get: function get() {\n    return _ok.cmd_ok;\n  }\n});\n\nvar _pwd = __webpack_require__(26);\n\nObject.defineProperty(exports, 'cmd_pwd', {\n  enumerable: true,\n  get: function get() {\n    return _pwd.cmd_pwd;\n  }\n});\n\nvar _reset = __webpack_require__(27);\n\nObject.defineProperty(exports, 'cmd_reset', {\n  enumerable: true,\n  get: function get() {\n    return _reset.cmd_reset;\n  }\n});\n\nvar _rm = __webpack_require__(28);\n\nObject.defineProperty(exports, 'cmd_rm', {\n  enumerable: true,\n  get: function get() {\n    return _rm.cmd_rm;\n  }\n});\n\nvar _set_temp = __webpack_require__(29);\n\nObject.defineProperty(exports, 'cmd_set_temp', {\n  enumerable: true,\n  get: function get() {\n    return _set_temp.cmd_set_temp;\n  }\n});\n\nvar _switch = __webpack_require__(30);\n\nObject.defineProperty(exports, 'cmd_switch', {\n  enumerable: true,\n  get: function get() {\n    return _switch.cmd_switch;\n  }\n});\n\nvar _version = __webpack_require__(31);\n\nObject.defineProperty(exports, 'cmd_version', {\n  enumerable: true,\n  get: function get() {\n    return _version.cmd_version;\n  }\n});\n\nvar _M = __webpack_require__(10);\n\nObject.defineProperty(exports, 'cmd_M999', {\n  enumerable: true,\n  get: function get() {\n    return _M.cmd_M999;\n  }\n});\n\nvar _util = __webpack_require__(0);\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BoardRequest = undefined;\n\nvar _request = __webpack_require__(5);\n\nvar _request2 = _interopRequireDefault(_request);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n* Board request.\n* @extends {Request}\n*/\nvar BoardRequest = function (_Request) {\n  _inherits(BoardRequest, _Request);\n\n  /**\n  * @param {Board}  board    Board instance.\n  * @param {Object} settings See {@link src/board/settings.js~boardSettings}.request for defaults keys/values.\n  */\n  function BoardRequest(board) {\n    var settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, BoardRequest);\n\n    /**\n    * Board instance.\n    * @type {String}\n    * @protected\n    */\n    var _this = _possibleConstructorReturn(this, (BoardRequest.__proto__ || Object.getPrototypeOf(BoardRequest)).call(this, Object.assign({}, board.settings.request, settings, {\n      url: 'http://' + board.address + '/' + settings.url\n    })));\n    // call parent constructor\n\n\n    _this.board = board;\n    return _this;\n  }\n\n  return BoardRequest;\n}(_request2.default);\n\n// Exports\n\n\nexports.default = BoardRequest;\nexports.BoardRequest = BoardRequest;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.requestEventTypes = exports.Request = undefined;\n\nvar _request = __webpack_require__(40);\n\nvar _request2 = _interopRequireDefault(_request);\n\nvar _types = __webpack_require__(2);\n\nvar _types2 = _interopRequireDefault(_types);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _request2.default;\nexports.Request = _request2.default;\nexports.requestEventTypes = _types2.default;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar rng = __webpack_require__(43);\nvar bytesToUuid = __webpack_require__(42);\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.board = exports.request = exports.VERSION = undefined;\n\nvar _request = __webpack_require__(5);\n\nvar request = _interopRequireWildcard(_request);\n\nvar _board = __webpack_require__(33);\n\nvar board = _interopRequireWildcard(_board);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n/**\n* API version\n* @type {String}\n*/\nvar VERSION = exports.VERSION = '2.0.0';\n\n// public interface\nexports.request = request;\nexports.board = board;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Board = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _v = __webpack_require__(6);\n\nvar _v2 = _interopRequireDefault(_v);\n\nvar _settings = __webpack_require__(35);\n\nvar _settings2 = _interopRequireDefault(_settings);\n\nvar _request = __webpack_require__(4);\n\nvar _request2 = _interopRequireDefault(_request);\n\nvar _types = __webpack_require__(2);\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _command = __webpack_require__(9);\n\nvar _command2 = _interopRequireDefault(_command);\n\nvar _topics = __webpack_require__(1);\n\nvar _topics2 = _interopRequireDefault(_topics);\n\nvar _info = __webpack_require__(34);\n\nvar _info2 = _interopRequireDefault(_info);\n\nvar _filetree = __webpack_require__(32);\n\nvar _filetree2 = _interopRequireDefault(_filetree);\n\nvar _util = __webpack_require__(0);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n* Board class.\n*/\nvar Board = function () {\n  /**\n  * @param {Object} settings See {@link src/board/settings.js~boardSettings} for defaults keys/values.\n  */\n  function Board() {\n    var settings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Board);\n\n    /**\n    * Board settings, see {@link src/board/settings.js~boardSettings} for defaults keys/values.\n    * @type {Object}\n    * @protected\n    */\n    this.settings = Object.assign({}, _settings2.default, settings);\n\n    if (!this.settings.address || typeof this.settings.address !== 'string') {\n      throw new Error('An address must be specified.');\n    }\n\n    /**\n    * Board address.\n    * @type {String}\n    * @protected\n    */\n    this.address = this.settings.address.trim();\n\n    if (this.address.startsWith('http://')) {\n      this.address = this.address.replace('http://');\n    }\n\n    if (this.address.endsWith('/')) {\n      this.address = this.address.replace(/\\/+$/g, '');\n    }\n\n    /**\n    * Unique identifier (uuid/v4).\n    * @type {String}\n    * @protected\n    */\n    this.uuid = (0, _v2.default)();\n\n    /**\n    * Board info parsed from version command.\n    * ```\n    * {\n    *   branch: \"edge\",\n    *   hash  : \"9ab4538\",\n    *   date  : \"Oct 10 2016 04:09:42\",\n    *   mcu   : \"LPC1769\",\n    *   clock : \"120MHz\"\n    * }\n    * ```\n    * @type {BoardInfo|null}\n    * @default null\n    * @protected\n    */\n    this.info = null;\n\n    /**\n    * Flat files tree.\n    * @type {BoardFileTree}\n    * @protected\n    */\n    this.fileTree = new _filetree2.default();\n\n    /**\n    * Topic subscriptions.\n    * @type {Map}\n    * @protected\n    */\n    this.subscriptions = new Map();\n\n    /**\n    * Command queue.\n    * @type {Array}\n    * @protected\n    */\n    this.commandQueue = [];\n\n    /**\n    * Command queue locked ?.\n    * @type {Boolean}\n    * @protected\n    */\n    this.commandQueueLocked = false;\n\n    /**\n    * Command queue in pause ?.\n    * @type {Boolean}\n    * @protected\n    */\n    this.commandQueuePaused = false;\n\n    /**\n    * Pending command (from command queue).\n    * @type {BoardCommand|null}\n    * @protected\n    */\n    this.pendingCommand = null;\n\n    /**\n    * Is system halted ?\n    * @type {Boolean}\n    * @protected\n    */\n    this.halted = false;\n  }\n\n  /**\n  * @typedef  {Object} BoardMessage\n  * @property {Board}  board   Board instance.\n  * @property {String} topic   Topic name, see {@link src/board/topics/index.js} for the topics list.\n  * @property {Mixed}  payload Message payload.\n  */\n\n  /**\n  * Publish message to topic, see {@link src/board/topics/index.js} for the topics list.\n  *\n  * @param  {String} topic See {@link src/board/topics/index.js} for possible values.\n  * @param  {Mixed}  [payload = null]\n  * @see {@link Board#subscribe}\n  * @see {@link Board#unsubscribe}\n  * @see {@link Board#deleteTopic}\n  */\n\n\n  _createClass(Board, [{\n    key: 'publish',\n    value: function publish(topic) {\n      var payload = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      // fix topic case\n      topic = topic.trim().toLowerCase();\n\n      // if topic found\n      if (this.subscriptions.has(topic)) {\n        // message payload\n        var message = { board: this, topic: topic, payload: payload };\n\n        // call each registrered callback\n        this.subscriptions.get(topic).forEach(function (subscription) {\n          subscription.callback.call(subscription.context, message);\n        });\n      }\n    }\n\n    /**\n    * @typedef  {Object} BoardSubscription\n    * @property {String}        uuid     Unique identifier (uuid/v4).\n    * @property {Function}      callback A function that takes as single parameter an {@link BoardMessage} object.\n    * @property {Function|null} context  Callback context to apply on call.\n    */\n\n    /**\n    * Subscribe to topic, see {@link src/board/topics/index.js} for the topics list.\n    *\n    * @param  {String}      topic          Topic name, see {@link src/board/topics/index.js} for the topics list.\n    * @param  {Function}    callback       A function that takes as single parameter an {@link BoardMessage} object.\n    * @param  {Object|null} [context=null] Callback context to apply on call.\n    * @return {BoardSubscription}\n    * @see {@link Board#publish}\n    * @see {@link Board#unsubscribe}\n    * @see {@link Board#deleteTopic}\n    */\n\n  }, {\n    key: 'subscribe',\n    value: function subscribe(topic, callback) {\n      var context = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n      // fix topic case\n      topic = topic.trim().toLowerCase();\n\n      // if first subscription, create new topic\n      if (!this.subscriptions.has(topic)) {\n        this.subscriptions.set(topic, new Map());\n      }\n\n      // fix callback context\n      context = context || callback;\n\n      // create new subscription\n      var subscription = { uuid: (0, _v2.default)(), callback: callback, context: context };\n\n      // register new subscription\n      this.subscriptions.get(topic).set(subscription.uuid, subscription);\n\n      // return the subscription\n      return subscription;\n    }\n\n    /**\n    * Unsubscribe from topic.\n    *\n    * @param  {BoardSubscription|String|Array} uuid Subscription, subscription uuid or callback function.\n    * @return {Integer} Number of callback removed.\n    * @see {@link Board#publish}\n    * @see {@link Board#subscribe}\n    * @see {@link Board#deleteTopic}\n    */\n\n  }, {\n    key: 'unsubscribe',\n    value: function unsubscribe(uuid) {\n      var _this = this;\n\n      var removed = 0;\n\n      // unsubscribe an array of uuid or function\n      if (Array.isArray(uuid)) {\n        uuid.forEach(function (id) {\n          removed += _this.unsubscribe(id);\n        });\n\n        return removed;\n      }\n\n      // unsubscribe from function\n      if (typeof uuid === 'function') {\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = this.subscriptions.values()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var subscriptions = _step.value;\n\n            subscriptions.forEach(function (subscription) {\n              if (subscription.callback === uuid) {\n                removed += _this.unsubscribe(subscription.uuid);\n              }\n            });\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        return removed;\n      }\n\n      // unsubscribe from uuid string\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.subscriptions.keys()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var topic = _step2.value;\n\n          if (this.subscriptions.get(topic).has(uuid)) {\n            removed += this.subscriptions.get(topic).delete(uuid);\n\n            if (this.subscriptions.get(topic).size === 0) {\n              this.deleteTopic(topic);\n            }\n\n            return removed;\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return removed;\n    }\n\n    /**\n    * Delete entire topic.\n    *\n    * @param  {String} topic Topic name, see {@link src/board/topics/index.js} for the topics list.\n    * @return {Boolean} False if not found.\n    * @see {@link Board#publish}\n    * @see {@link Board#subscribe}\n    * @see {@link Board#unsubscribe}\n    */\n\n  }, {\n    key: 'deleteTopic',\n    value: function deleteTopic(topic) {\n      if (this.subscriptions.get(topic)) {\n        return this.subscriptions.delete(topic);\n      }\n\n      return false;\n    }\n\n    /**\n    * Create an request.\n    *\n    * @param  {Object} [settings = {}] Request settings (see {@link BoardRequest} for more details).\n    * @return {BoardRequest}\n    */\n\n  }, {\n    key: 'createRequest',\n    value: function createRequest() {\n      var settings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      return new _request2.default(this, settings);\n    }\n\n    /**\n    * Send an request to the board (GET by default).\n    *\n    * ```\n    * var board = new Board({ address: '192.168.1.102' });\n    *\n    * board.sendRequest({ url: 'sd/config' })\n    * .then(function(event) {\n    *   console.info('then:', event);\n    * })\n    * .catch(function(event) {\n    *   console.error('catch:', event);\n    * });\n    * ```\n    *\n    * @param  {Object} [settings = {}] Request settings (see {@link BoardRequest} for more details).\n    * @return {Promise<RequestEvent>}\n    */\n\n  }, {\n    key: 'sendRequest',\n    value: function sendRequest() {\n      var settings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      return this.createRequest(settings).send();\n    }\n\n    /**\n    * Create an command.\n    *\n    * @param  {String} command         Command line.\n    * @param  {Object} [settings = {}] Request settings (see {@link BoardCommand} for more details).\n    * @return {BoardCommand}\n    */\n\n  }, {\n    key: 'createCommand',\n    value: function createCommand(command) {\n      var _this2 = this;\n\n      var settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      // wrap request events\n      settings.on = settings.on || {};\n\n      var _loop = function _loop(key) {\n        var topic = _types2.default[key];\n        var callback = settings.on[topic];\n\n        settings.on[topic] = function (event) {\n          _this2.publish('command.' + topic, event);\n          callback && callback(event);\n        };\n      };\n\n      for (var key in _types2.default) {\n        _loop(key);\n      }\n\n      var boardCommand = new _command2.default(this, command, settings);\n      this.publish(_topics2.default.COMMAND_CREATE, boardCommand);\n      return boardCommand;\n    }\n\n    /**\n    * Send an command to the board.\n    *\n    * @param  {String} boardCommand\n    * @return {Promise<RequestEvent>}\n    */\n\n  }, {\n    key: '_sendCommand',\n    value: function _sendCommand(boardCommand) {\n      var _this3 = this;\n\n      this.publish(_topics2.default.COMMAND_SEND, boardCommand);\n\n      return boardCommand.send().then(function (event) {\n        _this3.publish(_topics2.default.COMMAND_RESPONSE, event);\n        return Promise.resolve(event);\n      }).catch(function (event) {\n        _this3.publish(_topics2.default.COMMAND_ERROR, event);\n        return Promise.reject(event);\n      });\n    }\n\n    /**\n    * Create and send an command to the board.\n    *\n    * ```\n    * var board = new Board({ address: '192.168.1.102' });\n    *\n    * board.sendCommand('ls -s sd/')\n    * .then(function(event) {\n    *   console.info('then:', event);\n    *   console.info('data:', event.payload.data);\n    * })\n    * .catch(function(event) {\n    *   console.error('catch:', event);\n    * });\n    * ```\n    *\n    * @param  {String} command         Command line.\n    * @param  {Object} [settings = {}] Request settings (see {@link BoardCommand} for more details).\n    * @return {Promise<RequestEvent>}\n    * @see {@link Board#addCommand}\n    * @see {@link Board#pushCommand}\n    */\n\n  }, {\n    key: 'sendCommand',\n    value: function sendCommand(command) {\n      var settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      return this._sendCommand(this.createCommand(command, settings));\n    }\n\n    /**\n    * Create and add the command in command queue.\n    *\n    * @param  {String} command         Command line.\n    * @param  {Object} [settings = {}] Request settings (see {@link BoardCommand} for more details).\n    * @return {BoardCommand}\n    * @see {@link Board#sendCommand}\n    * @see {@link Board#pushCommand}\n    */\n\n  }, {\n    key: 'addCommand',\n    value: function addCommand(command) {\n      var settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      var boardCommand = this.createCommand(command, settings);\n      this.publish(_topics2.default.COMMAND_QUEUE_ADD, boardCommand);\n      this.commandQueue.push(boardCommand);\n      return boardCommand;\n    }\n\n    /**\n    * Create and add the command in command queue,\n    * then process the command queue if not in pause or locked.\n    *\n    * @param  {String} command         Command line.\n    * @param  {Object} [settings = {}] Request settings (see {@link BoardCommand} for more details).\n    * @return {BoardCommand}\n    * @see {@link Board#sendCommand}\n    * @see {@link Board#addCommand}\n    */\n\n  }, {\n    key: 'pushCommand',\n    value: function pushCommand(command) {\n      var settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      var boardCommand = this.addCommand(command, settings);\n      this.processCommandQueue();\n      return boardCommand;\n    }\n\n    /**\n    * Process command queue.\n    * @see {@link Board#pauseCommandQueue}\n    * @see {@link Board#stopCommandQueue}\n    * @see {@link Board#resumeCommandQueue}\n    * @see {@link Board#clearCommandQueue}\n    */\n\n  }, {\n    key: 'processCommandQueue',\n    value: function processCommandQueue() {\n      var _this4 = this;\n\n      // command queue locked or empty ?\n      if (this.commandQueueLocked || this.commandQueuePaused || !this.commandQueue.length) {\n        return;\n      }\n\n      // lock the command queue\n      this.commandQueueLocked = true;\n\n      // get the older command\n      this.pendingCommand = this.commandQueue.shift();\n\n      // end of queue\n      if (!this.pendingCommand) {\n        this.publish(_topics2.default.COMMAND_QUEUE_EMPTY);\n        return;\n      }\n\n      this.publish(_topics2.default.COMMAND_QUEUE_SEND, this.pendingCommand);\n\n      this._sendCommand(this.pendingCommand).then(function (event) {\n        return event;\n      }).catch(function (event) {\n        return event;\n      }).then(function (event) {\n        // reset pending command\n        _this4.pendingCommand = null;\n\n        // unlock the command queue\n        _this4.commandQueueLocked = false;\n\n        // process next command in queue\n        _this4.processCommandQueue();\n      });\n    }\n\n    /**\n    * Pause command queue but let the pending command terminate.\n    * @see {@link Board#processCommandQueue}\n    * @see {@link Board#stopCommandQueue}\n    * @see {@link Board#resumeCommandQueue}\n    * @see {@link Board#clearCommandQueue}\n    */\n\n  }, {\n    key: 'pauseCommandQueue',\n    value: function pauseCommandQueue() {\n      this.commandQueuePaused = true;\n      this.publish(_topics2.default.COMMAND_QUEUE_PAUSE, this.commandQueue);\n    }\n\n    /**\n    * Abort the pending command.\n    */\n\n  }, {\n    key: 'abortPendingCommand',\n    value: function abortPendingCommand() {\n      if (this.pendingCommand) {\n        this.pendingCommand.abort();\n        this.pendingCommand = null;\n      }\n    }\n\n    /**\n    * Pause command queue and abort the pending command.\n    * @see {@link Board#processCommandQueue}\n    * @see {@link Board#pauseCommandQueue}\n    * @see {@link Board#resumeCommandQueue}\n    * @see {@link Board#clearCommandQueue}\n    */\n\n  }, {\n    key: 'stopCommandQueue',\n    value: function stopCommandQueue() {\n      this.abortPendingCommand();\n      this.pauseCommandQueue();\n    }\n\n    /**\n    * Resume command queue.\n    * @see {@link Board#processCommandQueue}\n    * @see {@link Board#pauseCommandQueue}\n    * @see {@link Board#stopCommandQueue}\n    * @see {@link Board#clearCommandQueue}\n    */\n\n  }, {\n    key: 'resumeCommandQueue',\n    value: function resumeCommandQueue() {\n      this.commandQueuePaused = false;\n      this.publish(_topics2.default.COMMAND_QUEUE_RESUME, this.commandQueue);\n      this.processCommandQueue();\n    }\n\n    /**\n    * Clear command queue and abort the pending command.\n    * @see {@link Board#processCommandQueue}\n    * @see {@link Board#pauseCommandQueue}\n    * @see {@link Board#stopCommandQueue}\n    * @see {@link Board#resumeCommandQueue}\n    */\n\n  }, {\n    key: 'clearCommandQueue',\n    value: function clearCommandQueue() {\n      this.abortPendingCommand();\n      this.publish(_topics2.default.COMMAND_QUEUE_CLEAR, this.commandQueue);\n\n      this.commandQueueLocked = false;\n      this.commandQueuePaused = false;\n      this.commandQueue = [];\n    }\n\n    /**\n    * Get the board informations.\n    *\n    * @param  {Boolean} [refresh = false]\n    * @return {Promise<BoardInfo|RequestEvent>}\n    */\n\n  }, {\n    key: 'getInfo',\n    value: function getInfo() {\n      var _this5 = this;\n\n      var refresh = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      return new Promise(function (resolve, reject) {\n        if (!refresh && _this5.info) {\n          resolve(_this5.info);\n        }\n\n        return _this5.sendCommand('version').then(function (event) {\n          _this5.info = new _info2.default(event.payload.data);\n          _this5.publish(_topics2.default.INFO_UPDATE, _this5.info);\n          resolve(_this5.info);\n        }).catch(reject);\n      });\n    }\n\n    /** @typedef {Map<String, BoardFolder|BoardFile>} BoardFileList */\n\n    /**\n    * Return a flat file tree for the given path.\n    *\n    * @param  {String}  [path    = '/']    Path to list file from.\n    * @param  {Boolean} [refresh = false]  Force refresh (no cache).\n    * @param  {Boolean} [firstCall = true] Used internaly for recursion.\n    * @return {Promise<BoardFileList|RequestEvent>}\n    */\n\n  }, {\n    key: 'listFiles',\n    value: function listFiles() {\n      var path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '/';\n\n      var _this6 = this;\n\n      var refresh = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var firstCall = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\n      // from cache\n      path = (0, _util.normalizePath)(path);\n\n      var tree = path === '/' ? this.fileTree : this.fileTree.list(path);\n\n      if (tree.size && !refresh) {\n        return Promise.resolve(tree);\n      }\n\n      // try to get the directory contents\n      return this.sendCommand('ls -s ' + path).then(function (event) {\n        // recursion...\n        var promises = [];\n\n        // children collection (file or directory)\n        event.payload.data.forEach(function (child) {\n          // set new child\n          _this6.fileTree.set(child);\n\n          // get sub-directory contents\n          if (child.type === 'folder') {\n            promises.push(_this6.listFiles(child.path, true, false));\n          }\n        });\n\n        // wait for all promises done\n        return Promise.all(promises).then(function (results) {\n          var tree = _this6.fileTree.list(path);\n\n          if (firstCall) {\n            _this6.publish(_topics2.default.FILETREE_UPDATE, tree);\n          }\n\n          return Promise.resolve(tree);\n        });\n      });\n    }\n\n    /**\n    * Clear state (M999).\n    *\n    * @return {Promise<RequestEvent>}\n    */\n\n  }, {\n    key: 'clearState',\n    value: function clearState() {\n      var _this7 = this;\n\n      return this.sendCommand('M999').then(function (event) {\n        _this7.halted = false;\n        return Promise.resolve(event);\n      });\n    }\n  }]);\n\n  return Board;\n}();\n\n// Exports\n\n\nexports.default = Board;\nexports.Board = Board;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BoardCommand = undefined;\n\nvar _request = __webpack_require__(4);\n\nvar _request2 = _interopRequireDefault(_request);\n\nvar _commands = __webpack_require__(3);\n\nvar boardCommands = _interopRequireWildcard(_commands);\n\nvar _topics = __webpack_require__(1);\n\nvar _topics2 = _interopRequireDefault(_topics);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n* Board request.\n* @extends {BoardRequest}\n*/\nvar BoardCommand = function (_BoardRequest) {\n  _inherits(BoardCommand, _BoardRequest);\n\n  /**\n  * @param {Board}  board       Board instance.\n  * @param {Board}  commandLine Command line, see {@link src/board/commands/index.js} for a list of implemented commands.\n  * @param {Object} settings    See {@link src/board/settings.js~boardSettings}.request for defaults keys/values.\n  * @param {Object} [settings.parseResponse = true] See {@link src/board/settings.js~boardSettings}.request for defaults keys/values.\n  */\n  function BoardCommand(board, commandLine) {\n    var settings = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, BoardCommand);\n\n    // Normalize and split the command line\n    commandLine = commandLine.trim().replace(/ +/g, ' ');\n\n    var commandArgs = commandLine.split(' ');\n    var commandName = commandArgs.shift();\n\n    // response...\n    var response = void 0;\n\n    // parse response by default\n    if (settings.parseResponse === undefined) {\n      settings.parseResponse = true;\n    }\n\n    // response parser\n    var responseParser = boardCommands['cmd_' + commandName];\n\n    // not yet implemented\n    if (!responseParser && settings.parseResponse) {\n      response = function response(r) {\n        throw new Error('Sorry! The \"' + commandName + '\" command is not (yet) implemented.');\n      };\n    } else {\n      response = function response(r) {\n        var test = r.trim();\n\n        if (test.startsWith('error:Unsupported command')) {\n          throw new Error('Unsupported command \"' + commandName + '\".');\n        }\n\n        if (test === '!!') {\n          if (!board.halted) {\n            board.halted = true;\n            board.publish(_topics2.default.STATE_HALT);\n          }\n\n          throw new Error('System halted !');\n        }\n\n        if (commandName === 'M999') {\n          board.publish(_topics2.default.STATE_CLEAR, test !== 'ok');\n        }\n\n        return settings.parseResponse ? responseParser(r, commandArgs) : r;\n      };\n    }\n\n    // call parent constructor\n\n    /**\n    * Command line.\n    * @type {String}\n    * @protected\n    */\n    var _this = _possibleConstructorReturn(this, (BoardCommand.__proto__ || Object.getPrototypeOf(BoardCommand)).call(this, board, Object.assign({}, board.settings.request, settings, {\n      data: commandLine + '\\n',\n      url: 'command',\n      method: 'POST',\n      filters: { response: response }\n    })));\n\n    _this.commandLine = commandLine;\n\n    /**\n    * Command name.\n    * @type {String}\n    * @protected\n    */\n    _this.commandName = commandName;\n\n    /**\n    * Command arguments.\n    * @type {Array}\n    * @protected\n    */\n    _this.commandArgs = commandArgs;\n    return _this;\n  }\n\n  return BoardCommand;\n}(_request2.default);\n\n// Exports\n\n\nexports.default = BoardCommand;\nexports.BoardCommand = BoardCommand;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cmd_M999 = cmd_M999;\n/**\n* Clear state.\n*\n* ### on success\n* ```\n* return true if state cleared or false if state not halted\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Boolean}\n* @throws {Error}\n*/\nfunction cmd_M999(raw, args) {\n  return raw.trim() !== 'ok';\n}\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cmd_cat = cmd_cat;\n\nvar _util = __webpack_require__(0);\n\n/**\n* Get file content.\n*\n* ### on success\n* ```\n* return \"Raw file contents as text.\"\n* ```\n* ### on error\n* ```\n* throw 'File not found \"xxx\".'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {String}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#L331\n*/\nfunction cmd_cat(raw, args) {\n  var source = (0, _util.normalizePath)(args[0] || '');\n\n  if (raw.trim().startsWith('File not found')) {\n    throw new Error('File not found \"' + source + '\".');\n  }\n\n  return raw;\n}\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cmd_cd = cmd_cd;\n\nvar _util = __webpack_require__(0);\n\n/**\n* Change current folder.\n*\n* ### on success\n* ```\n* return \"ok\"\n* ```\n* ### on error\n* ```\n* throw 'Could not open \"xxx\" directory.'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {String}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#L358\n*/\nfunction cmd_cd(raw, args) {\n  var source = (0, _util.normalizePath)(args[0] || '');\n\n  if (raw.trim().startsWith('Could not open directory')) {\n    throw new Error('Could not open \"' + source + '\" directory.');\n  }\n\n  return 'ok';\n}\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cmd_get = cmd_get;\n\nvar _get_temp = __webpack_require__(19);\n\nvar _get_pos = __webpack_require__(16);\n\nvar _get_wcs = __webpack_require__(20);\n\nvar _get_state = __webpack_require__(17);\n\nvar _get_status = __webpack_require__(18);\n\nvar _get_ik = __webpack_require__(15);\n\nvar _get_fk = __webpack_require__(14);\n\n/**\n* Get command `temp|pos|wcs|state|status|fk|ik`.\n*\n* - get temp [bed|hotend]\n* - get fk|ik [-m] x[,y,z]\n*\n* ### on success\n* ```\n* return \"...\"\n* ```\n* ### on error\n* ```\n* throw 'Unknown option \"xxx\".'\n* throw 'Sorry! The \"get xxx\" command is not (yet) implemented.'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Mixed}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#741\n*/\nfunction cmd_get(raw, args) {\n  // raw response\n  raw = raw.trim();\n\n  // option\n  var option = (args.shift() || '').toLowerCase();\n\n  // file not found\n  if (raw.startsWith('error:unknown option')) {\n    throw new Error('Unknown option \"' + option + '\".');\n  }\n\n  var func = void 0;\n\n  switch (option) {\n    case 'temp':\n      func = _get_temp.get_temp;\n      break;\n    case 'pos':\n      func = _get_pos.get_pos;\n      break;\n    case 'wcs':\n      func = _get_wcs.get_wcs;\n      break;\n    case 'state':\n      func = _get_state.get_state;\n      break;\n    case 'status':\n      func = _get_status.get_status;\n      break;\n    case 'ik':\n      func = _get_ik.get_ik;\n      break;\n    case 'fk':\n      func = _get_fk.get_fk;\n      break;\n    default:\n      throw new Error('Sorry! The \"get ' + option + '\" command is not (yet) implemented.');\n  }\n\n  return func(raw, args);\n}\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.get_fk = get_fk;\n/**\n* Get forward kinematics.\n*\n* ### on success\n* ```\n* return {\n*   \"move\": false,\n*   \"x\"   : 10,\n*   \"y\"   : 10,\n*   \"z\"   : 10\n* }\n* ```\n* ### on error\n* ```\n* throw 'Usage: get ik [-m] x[,y,z].'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Object}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#771\n*/\nfunction get_fk(raw, args) {\n  var move = args.shift() === '-m';\n\n  // error\n  if (raw.startsWith('error:')) {\n    throw new Error('Usage: get fk [-m] x[,y,z].');\n  }\n\n  var matches = raw.match(/cartesian= X ([0-9\\.]+), Y ([0-9\\.]+), Z ([0-9\\.]+)/);\n\n  return {\n    move: move,\n    x: parseFloat(matches[1]),\n    y: parseFloat(matches[2]),\n    z: parseFloat(matches[3])\n  };\n}\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.get_ik = get_ik;\n/**\n* Get inverse kinematics.\n*\n* ### on success\n* ```\n* return '...'\n* ```\n* ### on error\n* ```\n* throw 'Usage: get ik [-m] x[,y,z].'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Object}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#771\n*/\nfunction get_ik(raw, args) {\n  var move = args.shift() === '-m';\n\n  // error\n  if (raw.startsWith('error:')) {\n    throw new Error('Usage: get ik [-m] x[,y,z].');\n  }\n\n  var matches = raw.match(/actuator= X ([0-9\\.]+), Y ([0-9\\.]+), Z ([0-9\\.]+)/);\n\n  return {\n    move: move,\n    x: parseFloat(matches[1]),\n    y: parseFloat(matches[2]),\n    z: parseFloat(matches[3])\n  };\n}\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.get_pos = get_pos;\n/**\n* Get position.\n*\n* ### on success\n* ```\n* return {\n*   \"WCS\": {\n*     \"command\"    : \"M114\",\n*     \"description\": \"Position of all axes\",\n*     \"x\"          : 0,\n*     \"y\"          : 0,\n*     \"z\"          : 0\n*   },\n*   \"WPOS\": {\n*     \"command\"    : \"M114.1\",\n*     \"description\": \"Real time position of all axes\"\n*     // , x, y, z\n*   },\n*   \"MPOS\": {\n*     \"command\"    : \"M114.2\",\n*     \"description\": \"Real time machine position of all axes\"\n*     // , x, y, z\n*   },\n*   \"APOS\": {\n*     \"command\"    : \"M114.3\",\n*     \"description\": \"Real time actuator position of all actuators\"\n*     // , x, y, z\n*   },\n*   \"LMS\": {\n*     \"command\"    : \"M114.4\",\n*     \"description\": \"Last milestone\"\n*     // , x, y, z\n*   },\n*   \"LMP\": {\n*     \"command\"    : \"M114.5\",\n*     \"description\": \"Last machine position\"\n*     // , x, y, z\n*   }\n* }\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Object}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#818\n*/\nfunction get_pos(raw, args) {\n  // last C: X:0.0000 Y:0.0000 Z:0.0000\n  // realtime WPOS: X:0.0000 Y:0.0000 Z:0.0000\n  // MPOS: X:0.0000 Y:0.0000 Z:0.0000\n  // APOS: X:0.0000 Y:0.0000 Z:0.0000\n  // LMS: X:0.0000 Y:0.0000 Z:0.0000\n  // LMP: X:0.0000 Y:0.0000 Z:0.0000\n  // split on new lines\n  var lines = raw.split('\\n');\n  var key = void 0,\n      positions = {};\n\n  lines.forEach(function (line) {\n    var r = parsePositionString(line);\n    positions[r.key] = r.position;\n  });\n\n  // split response text on new lines\n  return positions;\n}\n\n// Parse position string.\n// WCS : M114   - Last WCS.\n// WPOS: M114.1 - Realtime WCS.\n// MPOS: M114.2 - Realtime machine coordinate system.\n// APOS: M114.3 - Realtime actuator position.\n// LMS : M114.4 - Last milestone.\n// LMP : M114.5 - Last machine position.\nfunction parsePositionString(line) {\n  var parts = line.split(':');\n  var key = parts.shift().replace(' ', '_').toUpperCase();\n  var coords = parts.join(':').trim().split(' ');\n\n  var position = {\n    x: parseFloat(coords[0].substr(2)),\n    y: parseFloat(coords[1].substr(2)),\n    z: parseFloat(coords[2].substr(2))\n  };\n\n  if (key === 'LAST_C') {\n    key = 'WCS';\n  } else if (key === 'REALTIME_WPOS') {\n    key = 'WPOS';\n  }\n\n  switch (key) {\n    case 'WCS':\n      position.command = 'M114';\n      position.description = 'Position of all axes';\n      break;\n    case 'WPOS':\n      position.command = 'M114.1';\n      position.description = 'Real time position of all axes';\n      break;\n    case 'MPOS':\n      position.command = 'M114.2';\n      position.description = 'Real time machine position of all axes';\n      break;\n    case 'APOS':\n      position.command = 'M114.3';\n      position.description = 'Real time actuator position of all actuators';\n      break;\n    case 'LMS':\n      position.command = 'M114.4';\n      position.description = 'Last milestone';\n      break;\n    case 'LMP':\n      position.command = 'M114.5';\n      position.description = 'Last machine position';\n      break;\n    default:\n      position.command = 'M114.?';\n      position.description = 'Unknown type';\n  }\n\n  return { key: key, position: position };\n}\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.get_state = get_state;\n/**\n* Get state.\n*\n* ### on success\n* ```\n* return\n* {\n*   \"modal\"          : \"G0\",\n*   \"wcs\"            : \"G54\",\n*   \"plane_selection\": \"G17\",\n*   \"unit\"           : \"G21\",\n*   \"distance_mode\"  : \"G90\",\n*   \"path_control\"   : \"G94\",\n*   \"program_pause\"  : \"M0\",\n*   \"stop_tool\"      : \"M5\",\n*   \"stop_coolant\"   : \"M9\",\n*   \"tool\"           : \"T0\",\n*   \"feed_rate\"      : \"F4000.0000\",\n*   \"s_value\"        : \"S0.8000\",\n*   \"state\"          : [ \"G0\", \"G54\", \"G17\", \"G21\", \"G90\", \"G94\", \"M0\", \"M5\", \"M9\", \"T0\", \"F4000.0000\", \"S0.8000\" ]\n* }\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Object}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#832\n*/\nfunction get_state(raw, args) {\n  var state = raw.slice(1, -1).split(' ');\n\n  return {\n    modal: state[0],\n    wcs: state[1],\n    plane_selection: state[2],\n    unit: state[3],\n    distance_mode: state[4],\n    path_control: state[5],\n    program_pause: state[6],\n    stop_tool: state[7],\n    stop_coolant: state[8],\n    tool: state[9],\n    feed_rate: state[10],\n    s_value: state[11],\n    state: state\n  };\n}\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.get_status = get_status;\n/**\n* Get status.\n*\n* ### on success\n* ```\n* return\n* {\n*   \"status\"   : \"idle\", // [idle, alarm, home, hold, run]\n*   \"machine\"  : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"workspace\": { \"x\": 0, \"y\": 0, \"z\": 0 }\n* }\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Object}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#847\n* @see https://github.com/Smoothieware/Smoothieware/blob/f7d999cff4a33d83b09ce136c122b3b7b2f1c69a/src/libs/Kernel.cpp#L163\n*/\nfunction get_status(raw, args) {\n  var parts = raw.slice(1, -1).toLowerCase().replace(/(w|m)pos:/g, '').split(',');\n\n  return {\n    status: parts[0],\n    machine: {\n      x: parseFloat(parts[1]),\n      y: parseFloat(parts[2]),\n      z: parseFloat(parts[3])\n    },\n    workspace: {\n      x: parseFloat(parts[4]),\n      y: parseFloat(parts[5]),\n      z: parseFloat(parts[6])\n    }\n  };\n}\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.get_temp = get_temp;\n/**\n* Get temperature.\n*\n* ### on success\n* ```\n* // get temp\n* return [\n*   {\n*     \"designator\": \"T\",\n*     \"id\": 57988,\n*     \"current\": null, // null means the sensor is not properly connected, or it is damaged in some way.\n*     \"target\": 0,\n*     \"pwm\": 0\n*   },\n*   {\n*     \"designator\": \"B\",\n*     \"id\": 22060,\n*     \"current\": null,\n*     \"target\": 0,\n*     \"pwm\": 0\n*   }\n* ]\n* ```\n* ```\n* // get temp bed\n* return {\n*   \"designator\": \"bed\",\n*   \"current\": null,\n*   \"target\": 0,\n*   \"pwm\": 0\n* }\n* ```\n* ### on error\n* ```\n* throw 'No heaters found.'\n* throw '\"xxx\" is not a known temperature device.'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Object}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#745\n*/\nfunction get_temp(raw, args) {\n  if (raw.startsWith('no heaters found')) {\n    throw new Error('No heaters found.');\n  }\n\n  // device [bed|hotend]\n  var device = (args[0] || 'all').toLowerCase();\n\n  if (raw.endsWith('is not a known temperature device')) {\n    throw new Error('\"' + device + '\" is not a known temperature device.');\n  }\n\n  var result = void 0;\n\n  if (device === 'all') {\n    // [T (57988) temp: inf/0.000000 @0]\n    return raw.split('\\n').map(parseTempString);\n  }\n\n  // \"bed temp: inf/0.000000 @0\"\n  var matches = raw.match(/([a-z]+) temp: (inf|[0-9\\.]+)\\/(inf|[0-9\\.]+) @([0-9]+)/);\n\n  return {\n    device: matches[1],\n    current: parseFloat(matches[2]),\n    target: parseFloat(matches[3]),\n    pwm: parseInt(matches[4])\n  };\n}\n\nfunction parseTempString(temp) {\n  // T (57988) temp: inf/0.000000 @0\n  var matches = temp.match(/(T|B) \\(([0-9]+)\\) temp: (inf|[0-9\\.]+)\\/(inf|[0-9\\.]+) @([0-9]+)/);\n\n  return {\n    designator: matches[1],\n    id: parseInt(matches[2]),\n    current: parseFloat(matches[3]),\n    target: parseFloat(matches[4]),\n    pwm: parseInt(matches[5])\n  };\n}\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.get_wcs = get_wcs;\n/**\n* Get wcs state.\n*\n* ### on success\n* ```\n* return {\n*   \"current\": \"G54\",\n*   \"tool\"   : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"prob\"   : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G54\"    : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G55\"    : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G56\"    : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G57\"    : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G58\"    : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G59\"    : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G59.1\"  : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G59.2\"  : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G59.3\"  : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G28\"    : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G30\"    : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G92\"    : { \"x\": 0, \"y\": 0, \"z\": 0 }\n*}\n* ```\n* ### on error\n* ```\n* throw '...'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Object}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#828\n*/\nfunction get_wcs(raw, args) {\n  // [current WCS: G54]\n  // [G54:0.0000,0.0000,0.0000]\n  // [G55:0.0000,0.0000,0.0000]\n  // [G56:0.0000,0.0000,0.0000]\n  // [G57:0.0000,0.0000,0.0000]\n  // [G58:0.0000,0.0000,0.0000]\n  // [G59:0.0000,0.0000,0.0000]\n  // [G59.1:0.0000,0.0000,0.0000]\n  // [G59.2:0.0000,0.0000,0.0000]\n  // [G59.3:0.0000,0.0000,0.0000]\n  // [G28:0.0000,0.0000,0.0000]\n  // [G30:0.0000,0.0000,0.0000]\n  // [G92:0.0000,0.0000,0.0000]\n  // [Tool Offset:0.0000,0.0000,0.0000]\n  // [PRB:0.0000,0.0000,0.0000:0]\n  var lines = raw.split('\\n');\n\n  // unwrap line ([...])\n  lines = lines.map(function (line) {\n    return line.slice(1, -1);\n  });\n\n  var wcs = {\n    current: lines.shift().split(': ').pop()\n  };\n\n  lines.forEach(function (line) {\n    var parts = line.split(':');\n    var code = parts.shift().toUpperCase();\n    var coords = parts.shift().split(',');\n\n    if (code === 'TOOL OFFSET') {\n      code = 'tool';\n    } else if (code === 'PRB') {\n      code = 'prob';\n    }\n\n    wcs[code] = {\n      x: parseFloat(coords[0]),\n      y: parseFloat(coords[1]),\n      z: parseFloat(coords[2])\n    };\n  });\n\n  return wcs;\n}\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cmd_help = cmd_help;\n\nvar _util = __webpack_require__(0);\n\n/**\n* Get command help list.\n*\n* ### on success\n* ```\n* return \"List of command help. One by line.\"\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {String}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#1124\n*/\nfunction cmd_help(raw, args) {\n  return raw.trim();\n}\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cmd_ls = cmd_ls;\n\nvar _util = __webpack_require__(0);\n\n/**\n* Parse `ls` command response.\n*\n* ### on success\n* - If the `-s` parameter is not provided, the size is set to 0.\n* - The size is also set to 0 on directories.\n* ```\n* return [\n*   {\"extension\":\"\",\"name\":\"project1\",\"path\":\"/sd/project1\",\"parent\":\"/sd\",\"type\":\"folder\",\"size\":0},\n*   {\"extension\":\".cur\",\"name\":\"firmware.cur\",\"path\":\"/sd/firmware.cur\",\"parent\":\"/sd\",\"type\":\"file\",\"size\":368144},\n*   {\"extension\":\"\",\"name\":\"config\",\"path\":\"/sd/config\",\"parent\":\"/sd\",\"type\":\"file\",\"size\":29417},\n*   {\"extension\":\".gcode\",\"name\":\"file1.gcode\",\"path\":\"/sd/file1.gcode\",\"parent\":\"/sd\",\"type\":\"file\",\"size\":1914257},\n*   {\"extension\":\".gcode\",\"name\":\"file2.gcode\",\"path\":\"/sd/file2.gcode\",\"parent\":\"/sd\",\"type\":\"file\",\"size\":0},\n*   {\"extension\":\".gcode\",\"name\":\"file3.gcode\",\"path\":\"/sd/file3.gcode\",\"parent\":\"/sd\",\"type\":\"file\",\"size\":1062811}\n* ]\n* ```\n* ### on error\n* ```\n* throw 'Could not open \"xxx\" directory.'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Array}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#L284\n*/\nfunction cmd_ls(raw, args) {\n  // size flag\n  var size = args[0] === '-s';\n\n  size && args.shift();\n\n  // extract and normalize path\n  var path = (0, _util.normalizePath)(args[0] || '');\n\n  // raw response\n  raw = raw.trim();\n\n  // file not found\n  if (raw.startsWith('Could not open directory')) {\n    throw new Error('Could not open \"' + path + '\" directory.');\n  }\n\n  // excluded files\n  var excludes = [\"system volume information/\"];\n\n  // split lines\n  var lines = raw.split('\\n');\n  var info = null;\n\n  // empty files list\n  var files = [];\n  var file = null;\n  var isDir = false;\n\n  var extension = void 0;\n  var rootPath = path !== '/' ? path : '';\n\n  // for each lines (file)\n  lines.forEach(function (line) {\n    // remove trailing spaces\n    line = line.trim();\n\n    if (!excludes.includes(line)) {\n      // extract file/directory info (name/size)\n      info = line.trim().match(/^([a-z0-9_\\-\\.]+) ?(\\/| [0-9]+)?$/, 'gi');\n\n      if (info) {\n        // is directory ?\n        isDir = info[2] === '/';\n\n        extension = '';\n\n        if (info[1].includes('.')) {\n          extension = '.' + info[1].split('.').pop();\n        }\n\n        // set file info\n        files.push({\n          name: info[1],\n          extension: extension,\n          parent: rootPath.length ? rootPath : '/',\n          path: rootPath + '/' + info[1],\n          type: isDir ? 'folder' : 'file',\n          size: isDir ? 0 : parseInt(info[2] || 0)\n        });\n      }\n    }\n  });\n\n  return files;\n}\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nexports.cmd_mem = cmd_mem;\n\nvar _util = __webpack_require__(0);\n\n/**\n* Get informations about memory usage.\n*\n* ### on success\n* ```\n* return {\n*   \"BLOCK_SIZE\"    : 100\n*   \"UNUSED_HEAP\"   : 8344,\n*   \"USED_HEAP_SIZE\": 18008,\n*   \"FREE\"          : 2572,\n*   \"ALLOCATED\"     : 14348,\n*   \"TOTAL_FREE_RAM\": 10916,\n*   \"AHB0\": {\n*     \"free\"  : 13652,\n*     \"total\" : 15184, // verbose mode only\n*     \"used\"  : 1532,  // verbose mode only\n*     \"chunks\": [      // verbose mode only\n*        {\n*         \"address\": \"0x2007c4b0\",\n*         \"offset\": 0,\n*         \"bytes\": 268,\n*         \"free\": false\n*        }\n*     //, ...\n*     ]\n*   },\n*   \"AHB1\": {\n*     \"free\"  : 10440,\n*     \"total\" : 10440, // verbose mode only\n*     \"used\"  : 0      // verbose mode only\n*     \"chunks\": [...]  // verbose mode only\n*   },\n*   \"CHUNKS\": [ // verbose mode only\n*     {\n*       \"address\": \"0x10000CF8\",\n*       \"bytes\"  : 32,\n*       \"free\"   : false\n*     }\n*     //, ...\n*   ]\n* }\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {String}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#578\n*/\nfunction cmd_mem(raw, args) {\n  // trim raw response\n  raw = raw.trim();\n\n  // verbose mode\n  var verbose = args[0] === '-v';\n\n  // // Split on new line\n  var lines = raw.split(/[\\r\\n|\\r|\\n]+/gm);\n\n  var memory = {};\n\n  if (verbose) {\n    memory.CHUNKS = [];\n  }\n\n  var setValue = function setValue(line) {\n    var _line$split = line.split(': '),\n        _line$split2 = _slicedToArray(_line$split, 2),\n        key = _line$split2[0],\n        value = _line$split2[1];\n\n    var bytes = parseInt(value.trim().replace(/ bytes$/, ''));\n\n    key = key.trim().replace(/ +/gm, '_').toUpperCase();\n\n    if (key === 'FREE_AHB0') {\n      key = 'AHB0';\n    }\n\n    if (key.startsWith('AHB')) {\n      memory[key] = { free: bytes };\n    } else {\n      memory[key] = bytes;\n    }\n  };\n\n  var target = null;\n\n  lines.forEach(function (line) {\n    line = line.trim();\n\n    if (line.startsWith('Allocated') || line.startsWith('Free AHB0')) {\n      line = line.split(', ');\n      setValue(line[1]);\n      line = line[0];\n    }\n\n    if (verbose && line.startsWith('Chunk:')) {\n      // [\"Chunk: 7\", \"Address: 0x10001028\", \"Size: 20\", \"\"]\n      var chunk = line.split('  ');\n\n      memory.CHUNKS.push({\n        address: chunk[1].split(': ')[1],\n        bytes: parseInt(chunk[2].split(': ')[1]),\n        free: chunk[3] !== undefined\n      });\n    } else if (verbose && line.startsWith('Start:')) {\n      target = memory['AHB' + (target === null ? '0' : '1')];\n      target.chunks = [];\n    } else if (verbose && line.startsWith('Chunk at')) {\n      // \"Chunk at 0x2007c8a8 (+1016): used, 516 bytes\"\n      // \"Chunk at 0x2007caac (+1532): free, 13652 bytes\"\n      var _chunk = line.match(/^Chunk at ([0-9a-zA-Z]+) \\( *\\+([0-9]+)\\): (free|used), ([0-9]+) bytes$/);\n\n      target.chunks.push({\n        address: _chunk[1],\n        offset: parseInt(_chunk[2]),\n        bytes: parseInt(_chunk[4]),\n        free: _chunk[3] === 'free'\n      });\n    } else if (verbose && line.startsWith('End:')) {\n      // total 10440b, free: 10440b\n      var end = line.match(/^End: total ([0-9]+)b, free: ([0-9]+)b$/);\n      target.total = parseInt(end[1]);\n      target.used = target.total - target.free;\n    } else {\n      setValue(line);\n    }\n  });\n\n  return memory;\n}\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cmd_mv = cmd_mv;\n\nvar _util = __webpack_require__(0);\n\n/**\n* Move a file.\n*\n* ### on success\n* ```\n* return {\n*   source: '/sd/source.gcode',\n*   target: '/sd/target.gcode'\n* }\n* ```\n* ### on error\n* ```\n* throw 'Could not move \"xxx\" to \"yyy\".'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Object}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#L339\n*/\nfunction cmd_mv(raw, args) {\n  // raw response\n  raw = raw.trim();\n\n  var source = (0, _util.normalizePath)(args[0] || '');\n  var target = (0, _util.normalizePath)(args[1] || '');\n\n  // file not found\n  if (raw.startsWith('Could not rename')) {\n    throw new Error('Could not move \"' + source + '\" to \"' + target + '\".');\n  }\n\n  return { source: source, target: target };\n}\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cmd_ok = cmd_ok;\n/**\n* Parse `ok` command response.\n*\n* ### on success\n* ```\n* return \"ok\"\n* ```\n* ### on error\n* ```\n* throw \"ko\"\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {String}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#L272\n*/\nfunction cmd_ok(raw, args) {\n  if (raw.trim() === 'ok') {\n    return 'ok';\n  }\n\n  throw new Error('ko');\n}\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cmd_pwd = cmd_pwd;\n\nvar _util = __webpack_require__(0);\n\n/**\n* Get current working directory.\n*\n* ### on success\n* ```\n* return \"/sd/folder\"\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {String}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#L373\n*/\nfunction cmd_pwd(raw, args) {\n  return raw.trim();\n}\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cmd_reset = cmd_reset;\n\nvar _util = __webpack_require__(0);\n\n/**\n* Reset the board.\n*\n* ### on success\n* ```\n* return \"Smoothie out. Peace. Rebooting in 5 seconds...\\r\\n\"\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {String}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#L647\n*/\nfunction cmd_reset(raw, args) {\n  return raw.trim();\n}\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cmd_rm = cmd_rm;\n\nvar _util = __webpack_require__(0);\n\n/**\n* Remove a file.\n*\n* ### on success\n* ```\n* return \"/sd/removed_file.gcode\"\n* ```\n* ### on error\n* ```\n* throw 'Could not remove \"xxx\".'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {String}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#L331\n*/\nfunction cmd_rm(raw, args) {\n  // raw response\n  raw = raw.trim();\n\n  var source = (0, _util.normalizePath)(args[0] || '');\n\n  // file not found\n  if (raw.startsWith('Could not delete')) {\n    throw new Error('Could not remove \"' + source + '\".');\n  }\n\n  return source;\n}\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cmd_set_temp = cmd_set_temp;\n/**\n* Set temperature.\n*\n* - set_temp [bed|hotend]\n*\n* ### on success\n* ```\n* return {\n*   \"device\": \"bed\",\n*   \"target\": 180\n* }\n* ```\n* ### on error\n* ```\n* throw '\"xxx\" is not a known temperature device.'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Object}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#857\n*/\nfunction cmd_set_temp(raw, args) {\n  // raw response\n  raw = raw.trim();\n\n  // device\n  var device = (args.shift() || '').toLowerCase();\n\n  // error\n  if (raw.endsWith('is not a known temperature device')) {\n    throw new Error('\"' + device + '\" is not a known temperature device.');\n  }\n\n  // new temperature\n  var target = parseInt(args.shift() || 0);\n\n  return { device: device, target: target };\n}\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cmd_switch = cmd_switch;\n\nvar _util = __webpack_require__(0);\n\n/**\n* Switch module.\n*\n* `switch fan on` or `switch fan 150`\n*\n* ### on success\n* ```\n* return \"ok\"\n* ```\n* ### on error\n* ```\n* throw '\"xxx\" is not a known switch device.'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {String}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#L916\n*/\nfunction cmd_switch(raw, args) {\n  // raw response\n  raw = raw.trim();\n\n  // device\n  var device = args.shift() || '';\n\n  // error\n  if (raw.endsWith('is not a known switch device')) {\n    throw new Error('\"' + device + '\" is not a known switch device.');\n  }\n\n  return { device: device, value: args.shift() || '' };\n}\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cmd_version = cmd_version;\n/**\n* Parse version command response.\n*\n* ### on success\n* ```\n* return {\n*   branch: \"edge\",\n*   hash  : \"9ab4538\",\n*   date  : \"Oct 10 2016 04:09:42\",\n*   mcu   : \"LPC1769\",\n*   clock : \"120MHz\"\n* }\n* ```\n* ### on error\n* ```\n* throw \"Unknown version string\"\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Object}\n* @throws {Error}\n*/\nfunction cmd_version(raw, args) {\n  // version pattern\n  var pattern = /Build version: (.*), Build date: (.*), MCU: (.*), System Clock: (.*)/;\n\n  // test the pattern\n  var info = raw.trim().match(pattern);\n\n  if (info) {\n    // split branch-hash on dash\n    var branch = info[1].split('-');\n\n    // resolve\n    return {\n      branch: branch[0].trim(),\n      hash: branch[1].trim(),\n      date: info[2].trim(),\n      mcu: info[3].trim(),\n      clock: info[4].trim()\n    };\n  }\n\n  // reject\n  throw new Error('Unknown version string');\n}\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BoardFile = exports.BoardFolder = exports.BoardFileTree = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _util = __webpack_require__(0);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n* Board file class.\n*/\nvar BoardFile =\n/**\n* @param {Object} file File object from `ls -s` command.\n*/\nfunction BoardFile(file) {\n  _classCallCheck(this, BoardFile);\n\n  /**\n  * Parent folder path `/sd/my_folder`.\n  * @type {String}\n  */\n  this.parent = file.parent;\n\n  /**\n  * File size (bytes).\n  * @type {Integer}\n  */\n  this.size = file.size;\n\n  /**\n  * File path `/sd/my_folder/my_file.ext`.\n  * @type {String}\n  */\n  this.path = file.path;\n\n  /**\n  * File name with extension `my_file.ext`.\n  * @type {String}\n  */\n  this.name = file.name;\n\n  /**\n  * File extension with starting dot `.gcode`.\n  * @type {String}\n  */\n  this.extension = file.extension;\n};\n\n/**\n* Board folder class.\n*/\n\n\nvar BoardFolder =\n/**\n* @param {Object} folder Folder object from `ls -s` command.\n*/\nfunction BoardFolder(folder) {\n  _classCallCheck(this, BoardFolder);\n\n  /**\n  * Parent folder path `/sd`.\n  * @type {String}\n  */\n  this.parent = file.parent;\n\n  /**\n  * Folder size (bytes).\n  * @type {Integer}\n  */\n  this.size = file.size;\n\n  /**\n  * Folder path `/sd/my_folder`.\n  * @type {String}\n  */\n  this.path = file.path;\n\n  /**\n  * Folder name `my_folder`.\n  * @type {String}\n  */\n  this.name = file.name;\n};\n\n/**\n* Board file tree class.\n*/\n\n\nvar BoardFileTree = function () {\n  /**\n  * Constructor...\n  */\n  function BoardFileTree() {\n    _classCallCheck(this, BoardFileTree);\n\n    /**\n    * Flat file tree.\n    * @type {Map}\n    */\n    this.tree = new Map();\n\n    /**\n    * File tree size (bytes).\n    * @type {Integer}\n    */\n    this.size = 0;\n  }\n\n  /**\n  * Make and return a child object.\n  *\n  * @param  {Object} child Child object from `ls -s` command.\n  * @return {BoardFile|BoardFolder}\n  * @protected\n  */\n\n\n  _createClass(BoardFileTree, [{\n    key: 'makeChild',\n    value: function makeChild(child) {\n      return child.type === 'file' ? new BoardFile(child) : new BoardFolder(child);\n    }\n\n    /**\n    * Update tree size.\n    *\n    * @param  {BoardFile|BoardFolder} child\n    * @param  {Integer} size\n    * @protected\n    */\n\n  }, {\n    key: 'updateSize',\n    value: function updateSize(child, size) {\n      this.size += size;\n\n      var parent = this.tree.get(child.parent);\n\n      while (parent) {\n        parent.size += size;\n        parent = this.tree.get(parent.parent);\n      }\n    }\n\n    /**\n    * Remove a child and all of his children.\n    *\n    * @param  {BoardFile|BoardFolder} child Child name or object to remove.\n    * @return {Integer|null} Number of child removed.\n    */\n\n  }, {\n    key: 'remove',\n    value: function remove(child) {\n      var path = child.path || (0, _util.normalizePath)(child);\n      var file = this.tree.get(path);\n\n      if (!file) {\n        return null;\n      }\n\n      var removed = 1;\n\n      this.tree.delete(file.path);\n      this.updateSize(file, -file.size);\n\n      if (file instanceof BoardFolder) {\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = this.tree.keys()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var childPath = _step.value;\n\n            if (childPath.startsWith(file.path + '/')) {\n              this.tree.delete(childPath);\n              removed++;\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n      }\n\n      return removed;\n    }\n\n    /**\n    * Set a new child.\n    *\n    * @param {Object} child Child object from `ls -s` command.\n    */\n\n  }, {\n    key: 'set',\n    value: function set(child) {\n      var file = this.makeChild(child);\n\n      this.remove(file.path);\n      this.tree.set(file.path, file);\n      this.updateSize(file, file.size);\n    }\n\n    /**\n    * Return if child path exists.\n    *\n    * @param  {String} path\n    * @return {Boolean}\n    */\n\n  }, {\n    key: 'has',\n    value: function has(path) {\n      return this.tree.has((0, _util.normalizePath)(path));\n    }\n\n    /**\n    * Return a child from path if exists.\n    *\n    * @param  {String} path\n    * @return {BoardFile|BoardFolder|null}\n    */\n\n  }, {\n    key: 'get',\n    value: function get(path) {\n      return this.tree.get((0, _util.normalizePath)(path));\n    }\n\n    /**\n    * Return all children from path.\n    *\n    * @param  {String} path\n    * @return {Map}\n    */\n\n  }, {\n    key: 'list',\n    value: function list(path) {\n      var tree = new Map();\n\n      path = (0, _util.normalizePath)(path);\n\n      if (path !== '/') {\n        path += '/';\n      }\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.tree.keys()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var childPath = _step2.value;\n\n          if (childPath.startsWith(path)) {\n            tree.set(childPath, this.tree.get(childPath));\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return tree;\n    }\n  }]);\n\n  return BoardFileTree;\n}();\n\n// Exports\n\n\nexports.default = BoardFileTree;\nexports.BoardFileTree = BoardFileTree;\nexports.BoardFolder = BoardFolder;\nexports.BoardFile = BoardFile;\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.boardCommands = exports.boardTopics = exports.Board = undefined;\n\nvar _board = __webpack_require__(8);\n\nvar _board2 = _interopRequireDefault(_board);\n\nvar _topics = __webpack_require__(1);\n\nvar _topics2 = _interopRequireDefault(_topics);\n\nvar _commands = __webpack_require__(3);\n\nvar boardCommands = _interopRequireWildcard(_commands);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _board2.default;\nexports.Board = _board2.default;\nexports.boardTopics = _topics2.default;\nexports.boardCommands = boardCommands;\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n* Board info.\n*/\nvar BoardInfo =\n/**\n* @param {Object} info Object from the `version` command.\n*/\nfunction BoardInfo(info) {\n  _classCallCheck(this, BoardInfo);\n\n  /**\n  * @type {String}\n  * @protected\n  */\n  this.branch = null;\n\n  /**\n  * @type {String}\n  * @protected\n  */\n  this.hash = null;\n\n  /**\n  * @type {String}\n  * @protected\n  */\n  this.date = null;\n\n  /**\n  * @type {String}\n  * @protected\n  */\n  this.mcu = null;\n\n  /**\n  * @type {String}\n  * @protected\n  */\n  this.clock = null;\n\n  // merge info object\n  Object.assign(this, info);\n};\n\n// Exports\n\n\nexports.default = BoardInfo;\nexports.BoardInfo = BoardInfo;\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\r\n* Defaults board settings.\r\n* @type     {Object<String, Mixed>}\r\n* @property {String}   address                       IP or hostname without protocol prefix.\r\n* @property {Object}   request                       Request settings, see {@link src/request/settings.js~requestSettings} for defaults keys/values.\r\n* @property {Integer}  [request.timeout      = 0]    Timeout for this request in milliseconds.\r\n* @property {Integer}  [request.maxAttempts  = 3]    Maximum number of attemps before rejection.\r\n* @property {Integer}  [request.attemptDelay = 1000] Delay in milliseconds between two attemps.\r\n* @property {Function} [request.filters.status]      Default to 200 OK `function(s) { return s === 200 }`.\r\n*/\nvar boardSettings = {\n  address: undefined,\n  request: {\n    timeout: 0,\n    maxAttempts: 3,\n    attemptDelay: 1000,\n    filters: { status: function status(_status) {\n        return _status === 200;\n      } }\n  }\n};\n\nexports.default = boardSettings;\nexports.boardSettings = boardSettings;\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n* @external {ProgressEvent} https://developer.mozilla.org/fr/docs/Web/API/ProgressEvent\n*/\n\n/**\n* Request event.\n*/\nvar RequestEvent =\n/**\n* @param {String}        type    Event type, see {@link src/request/event/types.js} for possible values.\n* @param {ProgressEvent} event   Original progress event.\n* @param {Request}       request Request instance.\n* @param {RequestProgressPayload|RequestResponsePayload|RequestAttemptPayload|Error}\n*                        payload Request payload.\n*/\nfunction RequestEvent(type, event, request) {\n  var payload = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n  _classCallCheck(this, RequestEvent);\n\n  /**\n  * Event type, see {@link src/request/event/types.js} for possible values.\n  * @type {String}\n  * @protected\n  */\n  this.type = type;\n\n  /**\n  * Original progress event.\n  * @type {ProgressEvent}\n  * @protected\n  */\n  this.event = event;\n\n  /**\n  * Request instance.\n  * @type {Request}\n  * @protected\n  */\n  this.request = request;\n\n  /**\n  * Event payload.\n  * @type {RequestProgressPayload|RequestResponsePayload|RequestAttemptPayload|Error}\n  * @protected\n  */\n  this.payload = payload;\n};\n\n// Exports\n\n\nexports.default = RequestEvent;\nexports.RequestEvent = RequestEvent;\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n* Attempt payload.\n*/\nvar RequestAttemptPayload =\n/**\n* @param {Request} request\n*/\nfunction RequestAttemptPayload(request) {\n  _classCallCheck(this, RequestAttemptPayload);\n\n  /**\n  * Number of executed attempts.\n  * @type {Integer}\n  * @protected\n  */\n  this.done = request.attempts;\n\n  /**\n  * Attempts number.\n  * @type {Integer}\n  * @protected\n  */\n  this.num = this.done + 1;\n\n  /**\n  * Maximum number of attempts.\n  * @type {Integer}\n  * @protected\n  */\n  this.max = request.settings.maxAttempts;\n\n  /**\n  * Delay between two attempt.\n  * @type {Integer}\n  * @protected\n  */\n  this.delay = request.settings.attemptDelay;\n};\n\n// Exports\n\n\nexports.default = RequestAttemptPayload;\nexports.RequestAttemptPayload = RequestAttemptPayload;\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n* Progression payload.\n*/\nvar RequestProgressPayload =\n/**\n* @param {ProgressEvent} event Original progress event.\n*/\nfunction RequestProgressPayload(event) {\n  _classCallCheck(this, RequestProgressPayload);\n\n  /**\n  * Total bytes.\n  * @type {Integer}\n  * @protected\n  */\n  this.total = event.total || 0;\n\n  /**\n  * Loaded bytes.\n  * @type {Integer}\n  * @protected\n  */\n  this.loaded = event.loaded || 0;\n\n  /**\n  * Is computable.\n  * @type {Boolean}\n  * @protected\n  */\n  this.computable = event.lengthComputable;\n\n  /**\n  * Loaded percent.\n  * @type {Integer}\n  * @protected\n  */\n  this.percent = this.computable ? parseInt(this.loaded / this.total * 100) : 0;\n};\n\n// Exports\n\n\nexports.default = RequestProgressPayload;\nexports.RequestProgressPayload = RequestProgressPayload;\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n* Response payload.\n*/\nvar RequestResponsePayload =\n/**\n* @param {XMLHttpRequest} xhr    An `XMLHttpRequest` instance.\n* @param {Function}       filter Response filter.\n*/\nfunction RequestResponsePayload(xhr) {\n  var filter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n  _classCallCheck(this, RequestResponsePayload);\n\n  /**\n  * Response status code.\n  * @type {Integer}\n  * @protected\n  */\n  this.status = xhr.status;\n\n  /**\n  * Respons status text.\n  * @type {String}\n  * @protected\n  */\n  this.message = xhr.statusText;\n\n  /**\n  * Response data.\n  * @type {Mixed}\n  * @protected\n  */\n  this.data = xhr.response;\n\n  if (typeof filter === 'function') {\n    this.data = filter(this.data);\n  }\n};\n\n// Exports\n\n\nexports.default = RequestResponsePayload;\nexports.RequestResponsePayload = RequestResponsePayload;\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Request = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _v = __webpack_require__(6);\n\nvar _v2 = _interopRequireDefault(_v);\n\nvar _settings = __webpack_require__(41);\n\nvar _settings2 = _interopRequireDefault(_settings);\n\nvar _types = __webpack_require__(2);\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _request = __webpack_require__(36);\n\nvar _request2 = _interopRequireDefault(_request);\n\nvar _progress = __webpack_require__(38);\n\nvar _progress2 = _interopRequireDefault(_progress);\n\nvar _response = __webpack_require__(39);\n\nvar _response2 = _interopRequireDefault(_response);\n\nvar _attempt = __webpack_require__(37);\n\nvar _attempt2 = _interopRequireDefault(_attempt);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n* `XMLHttpRequest` wrapper with `Promise` logic.\n*\n* @example\n* function on(event) {\n*   console.info('on:', event.type, event);\n* }\n*\n* new Request({\n*   url   : 'http://192.168.1.102/command',\n*   method: 'POST',\n*   data  : 'version\\n',\n*   on    : {\n*     'retry'            : on,\n*     'retry.send'       : on,\n*     'retry.limit'      : on,\n*\n*     'download.load'    : on,\n*     'download.error'   : on,\n*     'download.abort'   : on,\n*     'download.timeout' : on,\n*     'download.progress': on,\n*\n*     'upload.load'      : on,\n*     'upload.error'     : on,\n*     'upload.abort'     : on,\n*     'upload.timeout'   : on,\n*     'upload.progress'  : on\n*   },\n*   filters: {\n*     status  : status => status === 200,\n*     response: response => JSON.stringify(response)\n*   }\n* })\n* .send()\n* .then(event => {\n*   console.info('then:', event);\n* })\n* .catch(event => {\n*   console.error('catch:', event);\n* });\n*\n* @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\n* @see https://pouchdb.com/2015/05/18/we-have-a-problem-with-promises.html\n*/\nvar Request = function () {\n  _createClass(Request, null, [{\n    key: 'encodeData',\n\n    /**\n    * Encode data object to uri string `key_1=value_1&key_2=value_2`.\n    *\n    * @param  {Object<String, String>} data\n    * @return {String}\n    */\n    value: function encodeData(data) {\n      // no data\n      if (data) {\n        // stringify data object\n        if ((typeof data === 'undefined' ? 'undefined' : _typeof(data)) === 'object') {\n          data = Object.keys(data).map(function (key) {\n            return encodeURIComponent(key) + '=' + encodeURIComponent(data[key]);\n          }).join('&');\n        }\n\n        // remove the first char if it is an '?'\n        if (data.startsWith('?')) {\n          data = data.substr(1);\n        }\n      }\n\n      return data;\n    }\n\n    /**\n    * Join data to url.\n    *\n    * @param  {String}                        url\n    * @param  {String|Object<String, String>} data\n    * @return {String}\n    */\n\n  }, {\n    key: 'joinUrlData',\n    value: function joinUrlData(url, data) {\n      return url + (url.indexOf('?') === -1 ? '?' : '&') + Request.encodeData(data);\n    }\n\n    /**\n    * @param {Object} settings See {@link src/request/settings.js~requestSettings} for defaults keys/values.\n    */\n\n  }]);\n\n  function Request() {\n    var settings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Request);\n\n    /**\n    * Request settings, see {@link src/request/settings.js~requestSettings} for defaults keys/values.\n    * @type {Object}\n    * @protected\n    */\n    this.settings = Object.assign({}, _settings2.default, settings);\n\n    /**\n    * Unique identifier (uuid/v4).\n    * @type {String}\n    * @protected\n    */\n    this.uuid = (0, _v2.default)();\n\n    /**\n    * Creation time.\n    * @type {Integer}\n    * @protected\n    */\n    this.time = Date.now();\n\n    /**\n    * Send time.\n    * @type {Integer}\n    * @protected\n    */\n    this.sendTime = null;\n\n    /**\n    * Elapsed time.\n    * @type {Integer}\n    * @protected\n    */\n    this.elapsedTime = null;\n\n    /**\n    * Number of attempts.\n    * @type {Integer}\n    * @protected\n    */\n    this.attempts = 0;\n\n    /**\n    * `XMLHttpRequest` instance.\n    * @type {XMLHttpRequest}\n    * @protected\n    */\n    this.xhr = null;\n\n    /**\n    * Aborted flag.\n    * @type {Boolean}\n    * @protected\n    */\n    this.aborted = false;\n  }\n\n  /**\n  * Trigger an user defined event.\n  *\n  * @throws {Error}\n  */\n\n\n  _createClass(Request, [{\n    key: '_triggerEvent',\n    value: function _triggerEvent(event) {\n      if (typeof this.settings.on[event.type] === 'function') {\n        this.settings.on[event.type](event);\n      }\n    }\n\n    /**\n    * Send the request and return a Promise.\n    *\n    * @return {Promise<RequestEvent>}\n    * @throws {Error}\n    */\n\n  }, {\n    key: '_send',\n    value: function _send() {\n      var _this = this;\n\n      // prevent calling twice\n      if (this.xhr) {\n        throw new Error('You can not send the same request twice.');\n      }\n\n      // increment attempts counter\n      this.attempts++;\n\n      // set send time\n      this.sendTime = Date.now();\n\n      // local settings\n      var settings = Object.assign({}, this.settings);\n\n      // normalize settings\n      settings.url = settings.url.trim();\n      settings.method = settings.method.toUpperCase();\n      settings.data = Request.encodeData(settings.data);\n\n      if (settings.method !== 'POST' && settings.data) {\n        // append data to uri and reset data\n        settings.url = Request.joinUrlData(settings.url, settings.data);\n        settings.data = null;\n      }\n\n      // wrap the request in promise\n      return new Promise(function (resolve, reject) {\n        // create http request object\n        _this.xhr = new XMLHttpRequest();\n\n        // override mime type\n        _this.xhr.overrideMimeType(settings.mimeType);\n\n        // open async request\n        _this.xhr.open(settings.method, settings.url, true);\n\n        // status\n        var rejected = false;\n\n        // create, trigger and return an RequestEvent\n        var createEvent = function createEvent(type, event) {\n          var payload = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n          var requestEvent = new _request2.default(type, event, _this, payload);\n          !rejected && _this._triggerEvent(requestEvent);\n          return requestEvent;\n        };\n\n        // on abort, error, timeout\n        var _reject = function _reject(type, event, error) {\n          _this.elapsedTime = Date.now() - _this.sendTime;\n          reject(createEvent(type, event, error instanceof Error ? error : new Error(error)));\n          rejected = true;\n        };\n\n        var onAbort = function onAbort(type, event) {\n          _this.aborted = true;\n          _reject(type, event, 'Connection aborted.');\n        };\n\n        var onError = function onError(type, event) {\n          _reject(type, event, 'Unknown network error.');\n        };\n\n        var onTimeout = function onTimeout(type, event) {\n          _reject(type, event, 'Connection timed out (>' + settings.timeout + 'ms).');\n        };\n\n        // on progress\n        var onProgress = function onProgress(type, event) {\n          createEvent(type, event, new _progress2.default(event));\n        };\n\n        // on load\n        var onLoad = function onLoad(type, event) {\n          // check status\n          var status = _this.xhr.status;\n\n          if (!status) {\n            return _reject(_types2.default.DOWNLOAD_ERROR, event, 'Unknown HTTP error.');\n          }\n\n          // let user check the status\n          if (typeof settings.filters.status === 'function') {\n            status = settings.filters.status(status);\n          }\n\n          if (!status) {\n            return _reject(type, event, _this.xhr.status + ' ' + _this.xhr.statusText);\n          }\n\n          // response payload\n          var payload = void 0;\n\n          try {\n            // catch filter error\n            payload = new _response2.default(_this.xhr, settings.filters.response);\n          } catch (error) {\n            return _reject(type, event, error);\n          }\n\n          // set elapsed time\n          _this.elapsedTime = Date.now() - _this.sendTime;\n\n          // resolve the promise\n          resolve(createEvent(type, event, payload));\n        };\n\n        var onUploaLoad = function onUploaLoad(type, event) {\n          createEvent(type, event, settings.data);\n        };\n\n        // download events\n        _this.xhr.onload = function (event) {\n          return onLoad(_types2.default.DOWNLOAD_LOAD, event);\n        };\n        _this.xhr.onabort = function (event) {\n          return onAbort(_types2.default.DOWNLOAD_ABORT, event);\n        };\n        _this.xhr.onerror = function (event) {\n          return onError(_types2.default.DOWNLOAD_ERROR, event);\n        };\n        _this.xhr.ontimeout = function (event) {\n          return onTimeout(_types2.default.DOWNLOAD_TIMEOUT, event);\n        };\n        _this.xhr.onprogress = function (event) {\n          return onProgress(_types2.default.DOWNLOAD_PROGRESS, event);\n        };\n\n        // upload events\n        _this.xhr.upload.onload = function (event) {\n          return onProgress(_types2.default.UPLOAD_LOAD, event);\n        };\n        _this.xhr.upload.onabort = function (event) {\n          return onAbort(_types2.default.UPLOAD_ABORT, event);\n        };\n        _this.xhr.upload.onerror = function (event) {\n          return onError(_types2.default.UPLOAD_ERROR, event);\n        };\n        _this.xhr.upload.ontimeout = function (event) {\n          return onTimeout(_types2.default.UPLOAD_TIMEOUT, event);\n        };\n        _this.xhr.upload.onprogress = function (event) {\n          return onProgress(_types2.default.UPLOAD_PROGRESS, event);\n        };\n\n        // set request headers\n        if (settings.headers) {\n          for (var header in settings.headers) {\n            _this.xhr.setRequestHeader(header, settings.headers[header]);\n          }\n        }\n\n        // set request timeout\n        _this.xhr.timeout = settings.timeout;\n\n        // send the request\n        _this.xhr.send(settings.data);\n\n        // dirty hack ...\n        if (_this.aborted) {\n          _this.xhr.abort();\n        }\n      });\n    }\n\n    /**\n    * Send the request and return a Promise.\n    *\n    * @return {Promise<RequestEvent>}\n    */\n\n  }, {\n    key: 'send',\n    value: function send() {\n      var _this2 = this;\n\n      return this._send().catch(function (event) {\n        // trigger user callback\n        var triggerEvent = function triggerEvent(type, event) {\n          return _this2._triggerEvent(new _request2.default(type, event.event, _this2, new _attempt2.default(_this2)));\n        };\n\n        // retry on timeout error if attempts limit is not reached\n        if (event.type.endsWith('timeout') || event.type.endsWith('error') && event.payload.message.startsWith('Unknown network error')) {\n          if (_this2.attempts < _this2.settings.maxAttempts) {\n            // call user callback\n            triggerEvent(_types2.default.BEFORE_RETRY, event);\n\n            // delayed retry\n            return new Promise(function (resolve, reject) {\n              setTimeout(function () {\n                // reset xhr object\n                _this2.xhr = null;\n\n                // call user callback\n                triggerEvent(_types2.default.RETRY, event);\n\n                // (re)send the request\n                return _this2.send().then(resolve).catch(reject);\n              }, _this2.settings.attemptDelay);\n            });\n          }\n\n          // call user callback\n          triggerEvent(_types2.default.RETRY_LIMIT, event);\n\n          var payload = new Error('Too many attempts (max: ' + _this2.attempts + ').');\n          event = new _request2.default(_types2.default.DOWNLOAD_ERROR, event.event, _this2, payload);\n        }\n\n        return Promise.reject(event);\n      });\n    }\n\n    /**\n    * Abort the this.\n    */\n\n  }, {\n    key: 'abort',\n    value: function abort() {\n      this.aborted = true;\n      this.xhr && this.xhr.abort();\n    }\n  }]);\n\n  return Request;\n}();\n\nexports.default = Request;\nexports.Request = Request;\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n* Defaults request settings.\n* @type     {Object<String, Mixed>}\n* @property {String}   [url = '/']               Absolute or relative URL.\n* @property {String}   [method = 'GET']         'GET', 'POST', 'DELETE', ...\n* @property {Mixed}    [data = null]             Data to send with the request.\n* @property {Object}   [headers = {}]            Headers to send with the request.\n* @property {Integer}  [timeout = 5000]          Timeout for this request in milliseconds.\n* @property {Integer}  [maxAttempts = 5]         Maximum number of attemps before rejection.\n* @property {Integer}  [attemptDelay = 5000]     Delay in milliseconds between two attemps.\n* @property {String}   [mimeType = 'text/plain'] Expected response mime type.\n* @property {Object}   [on = {}]                 Collection of function that takes as single parameter an {@link RequestEvent} instance.\n*                                                Ex.: `{ 'download.load': event => { }, 'upload.progress': event => { } }`\n*                                                See {@link src/request/event/types.js} for possible values.\n* @property {Object}   [filters = {}]            Collection of filter functions.\n* @property {Function} [filters.status]          A function that takes as single parameter the request status code and return an boolean to resolve/reject the request.\n* @property {Function} [filters.response]        A function that takes as single parameter the request response and return a new version or throw an {@link Error} to reject the {@link Promise}.\n*/\nvar requestSettings = {\n  url: '/',\n  method: 'GET',\n  data: null,\n  headers: {},\n  timeout: 1000,\n  maxAttempts: 5,\n  attemptDelay: 0,\n  mimeType: 'text/plain',\n  filters: {},\n  on: {}\n};\n\nexports.default = requestSettings;\nexports.requestSettings = requestSettings;\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports) {\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  return  bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\nmodule.exports = bytesToUuid;\n\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global) {// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\nvar rng;\n\nvar crypto = global.crypto || global.msCrypto; // for IE 11\nif (crypto && crypto.getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16);\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(rnds8);\n    return rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var  rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n\nmodule.exports = rng;\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(44)))\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports) {\n\nvar g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(7);\n\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// smoothie-happy.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 45);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3ea28c5bfc3e7655255c","/**\n* Return normalized path `sd/My///File.ext/   ` => `/sd/my/file.ext`.\n*\n* @param  {String} path\n* @return {String}\n*/\nexport function normalizePath(path) {\n  return '/' + path.trim()\n  .replace(/\\/+/, '/')\n  .replace(/^\\/|\\/$/, '')\n  .toLowerCase()\n}\n\n/**\n* Return filename from path.\n*\n* @param  {String} path\n* @return {String}\n*/\nexport function filename(path) {\n  return path.split('/').pop()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./board/util.js","/**\n* Board topics.\n*\n* @type {Object<String, String>}\n*/\nconst boardTopics = {\n  INFO_UPDATE    : 'info.update',     // payload: {BoardInfo}\n  FILETREE_UPDATE: 'filetree.update', // payload: {BoardFileList}\n\n  STATE_HALT : 'state.halt',  // payload: {null}\n  STATE_CLEAR: 'state.clear', // payload: {null}\n\n  COMMAND_QUEUE_ADD   : 'command.queue.add'   , // payload: {BoardCommand}\n  COMMAND_QUEUE_SEND  : 'command.queue.send'  , // payload: {BoardCommand}\n  COMMAND_QUEUE_EMPTY : 'command.queue.empty' , // payload: {null}\n  COMMAND_QUEUE_PAUSE : 'command.queue.pause' , // payload: {Board.commandQueue}\n  COMMAND_QUEUE_RESUME: 'command.queue.resume', // payload: {Board.commandQueue}\n  COMMAND_QUEUE_CLEAR : 'command.queue.clear' , // payload: {Board.commandQueue}\n\n  COMMAND_CREATE  : 'command.create',   // payload: {BoardCommand}\n  COMMAND_SEND    : 'command.send',     // payload: {BoardCommand}\n  COMMAND_ERROR   : 'command.error',    // payload: {RequestEvent}\n  COMMAND_RESPONSE: 'command.response', // payload: {RequestEvent}\n\n  // COMMAND_XXX payload: {RequestEvent}\n  COMMAND_RETRY       : 'command.retry',       // on retry planned\n  COMMAND_RETRY_SEND  : 'command.retry.send',  // juste before retry\n  COMMAND_RETRY_LIMIT : 'command.retry.limit', // on too many attemps\n\n  COMMAND_DOWNLOAD_LOAD    : 'command.download.load',\n  COMMAND_DOWNLOAD_ABORT   : 'command.download.abort',\n  COMMAND_DOWNLOAD_ERROR   : 'command.download.error',\n  COMMAND_DOWNLOAD_TIMEOUT : 'command.download.timeout',\n  COMMAND_DOWNLOAD_PROGRESS: 'command.download.progress',\n\n  COMMAND_UPLOAD_LOAD    : 'command.upload.load',\n  COMMAND_UPLOAD_ABORT   : 'command.upload.abort',\n  COMMAND_UPLOAD_ERROR   : 'command.upload.error',\n  COMMAND_UPLOAD_TIMEOUT : 'command.upload.timeout',\n  COMMAND_UPLOAD_PROGRESS: 'command.upload.progress',\n\n  // REQUEST_XXX payload: {RequestEvent}\n  REQUEST_RETRY       : 'request.retry',       // on retry planned\n  REQUEST_RETRY_SEND  : 'request.retry.send',  // juste before retry\n  REQUEST_RETRY_LIMIT : 'request.retry.limit', // on too many attemps\n\n  REQUEST_DOWNLOAD_LOAD    : 'request.download.load',\n  REQUEST_DOWNLOAD_ABORT   : 'request.download.abort',\n  REQUEST_DOWNLOAD_ERROR   : 'request.download.error',\n  REQUEST_DOWNLOAD_TIMEOUT : 'request.download.timeout',\n  REQUEST_DOWNLOAD_PROGRESS: 'request.download.progress',\n\n  REQUEST_UPLOAD_LOAD    : 'request.upload.load',\n  REQUEST_UPLOAD_ABORT   : 'request.upload.abort',\n  REQUEST_UPLOAD_ERROR   : 'request.upload.error',\n  REQUEST_UPLOAD_TIMEOUT : 'request.upload.timeout',\n  REQUEST_UPLOAD_PROGRESS: 'request.upload.progress'\n}\n\nexport default boardTopics\nexport { boardTopics }\n\n\n\n// WEBPACK FOOTER //\n// ./board/topics/index.js","/**\n* Request event types.\n*\n* @type {Object<String, String>}\n*/\nconst requestEventTypes = {\n  RETRY       : 'retry',       // on retry planned\n  RETRY_SEND  : 'retry.send',  // juste before retry\n  RETRY_LIMIT : 'retry.limit', // on too many attemps\n\n  DOWNLOAD_LOAD    : 'download.load',\n  DOWNLOAD_ABORT   : 'download.abort',\n  DOWNLOAD_ERROR   : 'download.error',\n  DOWNLOAD_TIMEOUT : 'download.timeout',\n  DOWNLOAD_PROGRESS: 'download.progress',\n\n  UPLOAD_LOAD    : 'upload.load',\n  UPLOAD_ABORT   : 'upload.abort',\n  UPLOAD_ERROR   : 'upload.error',\n  UPLOAD_TIMEOUT : 'upload.timeout',\n  UPLOAD_PROGRESS: 'upload.progress'\n}\n\nexport default requestEventTypes\nexport { requestEventTypes }\n\n\n\n// WEBPACK FOOTER //\n// ./request/event/types.js","import { normalizePath } from '../util'\n\n// -----------------------------------------------------------------------------\n// List of commands (12/2016)\n// http://smoothieware.org/console-commands\n// https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp\n// -----------------------------------------------------------------------------\n// # DONE\n// - TODO\n// -----------------------------------------------------------------------------\n// - abort\n// - break\n// - calc_thermistor\n// # cat\n// # cd\n// - config-load\n// - config-get\n// - config-set\n// - dfu\n// - fire\n// # get\n// # help\n// - load\n// # ls\n// - md5sum\n// # mem\n// # mv\n// - mkdir\n// - net\n// # ok\n// - play\n// - progress\n// # pwd\n// - remount\n// # reset\n// - resume\n// # rm\n// - save\n// # set_temp\n// - suspend\n// # switch\n// - test\n// - thermistors\n// - upload\n// # version\n//\n// # M999\n// -----------------------------------------------------------------------------\n\nexport { cmd_cat } from './cat'\nexport { cmd_cd } from './cd'\nexport { cmd_get } from './get'\nexport { cmd_help } from './help'\nexport { cmd_ls } from './ls'\nexport { cmd_mem } from './mem'\nexport { cmd_mv } from './mv'\nexport { cmd_ok } from './ok'\nexport { cmd_pwd } from './pwd'\nexport { cmd_reset } from './reset'\nexport { cmd_rm } from './rm'\nexport { cmd_set_temp } from './set_temp'\nexport { cmd_switch } from './switch'\nexport { cmd_version } from './version'\n\nexport { cmd_M999 } from './M999'\n\n\n\n// WEBPACK FOOTER //\n// ./board/commands/index.js","import Request from '../request'\n\n/**\n* Board request.\n* @extends {Request}\n*/\nclass BoardRequest extends Request {\n  /**\n  * @param {Board}  board    Board instance.\n  * @param {Object} settings See {@link src/board/settings.js~boardSettings}.request for defaults keys/values.\n  */\n  constructor(board, settings = {}) {\n    // call parent constructor\n    super(Object.assign({}, board.settings.request, settings, {\n      url: 'http://' + board.address + '/' + settings.url\n    }))\n\n    /**\n    * Board instance.\n    * @type {String}\n    * @protected\n    */\n    this.board = board\n  }\n}\n\n// Exports\nexport default BoardRequest\nexport { BoardRequest }\n\n\n\n// WEBPACK FOOTER //\n// ./board/request.js","import Request from './request'\nimport requestEventTypes from './event/types'\n\nexport default Request\nexport { Request, requestEventTypes }\n\n\n\n// WEBPACK FOOTER //\n// ./request/index.js","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/uuid/v4.js\n// module id = 6\n// module chunks = 0","/**\n* API version\n* @type {String}\n*/\nexport const VERSION = '2.0.0'\n\n// public interface\nimport * as request from './request'\nimport * as board from './board'\n\nexport { request, board }\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","import uuid from 'uuid/v4'\nimport boardSettings from './settings'\nimport BoardRequest from './request'\nimport requestEventTypes from '../request/event/types'\nimport BoardCommand from './command'\nimport boardTopics from './topics'\nimport BoardInfo from './info'\nimport BoardFileTree from './filetree'\nimport { normalizePath } from './util'\n\n/**\n* Board class.\n*/\nclass Board {\n  /**\n  * @param {Object} settings See {@link src/board/settings.js~boardSettings} for defaults keys/values.\n  */\n  constructor(settings = {}) {\n    /**\n    * Board settings, see {@link src/board/settings.js~boardSettings} for defaults keys/values.\n    * @type {Object}\n    * @protected\n    */\n    this.settings = Object.assign({}, boardSettings, settings)\n\n    if (! this.settings.address || typeof this.settings.address !== 'string') {\n      throw new Error('An address must be specified.')\n    }\n\n    /**\n    * Board address.\n    * @type {String}\n    * @protected\n    */\n    this.address = this.settings.address.trim()\n\n    if (this.address.startsWith('http://')) {\n      this.address = this.address.replace('http://')\n    }\n\n    if (this.address.endsWith('/')) {\n      this.address = this.address.replace(/\\/+$/g, '')\n    }\n\n    /**\n    * Unique identifier (uuid/v4).\n    * @type {String}\n    * @protected\n    */\n    this.uuid = uuid()\n\n    /**\n    * Board info parsed from version command.\n    * ```\n    * {\n    *   branch: \"edge\",\n    *   hash  : \"9ab4538\",\n    *   date  : \"Oct 10 2016 04:09:42\",\n    *   mcu   : \"LPC1769\",\n    *   clock : \"120MHz\"\n    * }\n    * ```\n    * @type {BoardInfo|null}\n    * @default null\n    * @protected\n    */\n    this.info = null\n\n    /**\n    * Flat files tree.\n    * @type {BoardFileTree}\n    * @protected\n    */\n    this.fileTree = new BoardFileTree()\n\n    /**\n    * Topic subscriptions.\n    * @type {Map}\n    * @protected\n    */\n    this.subscriptions = new Map()\n\n    /**\n    * Command queue.\n    * @type {Array}\n    * @protected\n    */\n    this.commandQueue = []\n\n    /**\n    * Command queue locked ?.\n    * @type {Boolean}\n    * @protected\n    */\n    this.commandQueueLocked = false\n\n    /**\n    * Command queue in pause ?.\n    * @type {Boolean}\n    * @protected\n    */\n    this.commandQueuePaused = false\n\n    /**\n    * Pending command (from command queue).\n    * @type {BoardCommand|null}\n    * @protected\n    */\n    this.pendingCommand = null\n\n    /**\n    * Is system halted ?\n    * @type {Boolean}\n    * @protected\n    */\n    this.halted = false\n  }\n\n  /**\n  * @typedef  {Object} BoardMessage\n  * @property {Board}  board   Board instance.\n  * @property {String} topic   Topic name, see {@link src/board/topics/index.js} for the topics list.\n  * @property {Mixed}  payload Message payload.\n  */\n\n  /**\n  * Publish message to topic, see {@link src/board/topics/index.js} for the topics list.\n  *\n  * @param  {String} topic See {@link src/board/topics/index.js} for possible values.\n  * @param  {Mixed}  [payload = null]\n  * @see {@link Board#subscribe}\n  * @see {@link Board#unsubscribe}\n  * @see {@link Board#deleteTopic}\n  */\n  publish(topic, payload = null) {\n    // fix topic case\n    topic = topic.trim().toLowerCase()\n\n    // if topic found\n    if (this.subscriptions.has(topic)) {\n      // message payload\n      let message = { board: this, topic, payload }\n\n      // call each registrered callback\n      this.subscriptions.get(topic).forEach(subscription => {\n        subscription.callback.call(subscription.context, message)\n      })\n    }\n  }\n\n  /**\n  * @typedef  {Object} BoardSubscription\n  * @property {String}        uuid     Unique identifier (uuid/v4).\n  * @property {Function}      callback A function that takes as single parameter an {@link BoardMessage} object.\n  * @property {Function|null} context  Callback context to apply on call.\n  */\n\n  /**\n  * Subscribe to topic, see {@link src/board/topics/index.js} for the topics list.\n  *\n  * @param  {String}      topic          Topic name, see {@link src/board/topics/index.js} for the topics list.\n  * @param  {Function}    callback       A function that takes as single parameter an {@link BoardMessage} object.\n  * @param  {Object|null} [context=null] Callback context to apply on call.\n  * @return {BoardSubscription}\n  * @see {@link Board#publish}\n  * @see {@link Board#unsubscribe}\n  * @see {@link Board#deleteTopic}\n  */\n  subscribe(topic, callback, context = null) {\n    // fix topic case\n    topic = topic.trim().toLowerCase()\n\n    // if first subscription, create new topic\n    if (! this.subscriptions.has(topic)) {\n      this.subscriptions.set(topic, new Map())\n    }\n\n    // fix callback context\n    context = context || callback\n\n    // create new subscription\n    let subscription = { uuid: uuid(), callback, context }\n\n    // register new subscription\n    this.subscriptions.get(topic).set(subscription.uuid, subscription)\n\n    // return the subscription\n    return subscription\n  }\n\n  /**\n  * Unsubscribe from topic.\n  *\n  * @param  {BoardSubscription|String|Array} uuid Subscription, subscription uuid or callback function.\n  * @return {Integer} Number of callback removed.\n  * @see {@link Board#publish}\n  * @see {@link Board#subscribe}\n  * @see {@link Board#deleteTopic}\n  */\n  unsubscribe(uuid) {\n    let removed = 0\n\n    // unsubscribe an array of uuid or function\n    if (Array.isArray(uuid)) {\n      uuid.forEach(id => {\n        removed += this.unsubscribe(id)\n      })\n\n      return removed\n    }\n\n    // unsubscribe from function\n    if (typeof uuid === 'function') {\n      for (let subscriptions of this.subscriptions.values()) {\n        subscriptions.forEach(subscription => {\n          if (subscription.callback === uuid) {\n            removed += this.unsubscribe(subscription.uuid)\n          }\n        })\n      }\n\n      return removed\n    }\n\n    // unsubscribe from uuid string\n    for (let topic of this.subscriptions.keys()) {\n      if (this.subscriptions.get(topic).has(uuid)) {\n        removed += this.subscriptions.get(topic).delete(uuid)\n\n        if (this.subscriptions.get(topic).size === 0) {\n          this.deleteTopic(topic)\n        }\n\n        return removed\n      }\n    }\n\n    return removed\n  }\n\n  /**\n  * Delete entire topic.\n  *\n  * @param  {String} topic Topic name, see {@link src/board/topics/index.js} for the topics list.\n  * @return {Boolean} False if not found.\n  * @see {@link Board#publish}\n  * @see {@link Board#subscribe}\n  * @see {@link Board#unsubscribe}\n  */\n  deleteTopic(topic) {\n    if (this.subscriptions.get(topic)) {\n      return this.subscriptions.delete(topic)\n    }\n\n    return false\n  }\n\n  /**\n  * Create an request.\n  *\n  * @param  {Object} [settings = {}] Request settings (see {@link BoardRequest} for more details).\n  * @return {BoardRequest}\n  */\n  createRequest(settings = {}) {\n    return new BoardRequest(this, settings)\n  }\n\n  /**\n  * Send an request to the board (GET by default).\n  *\n  * ```\n  * var board = new Board({ address: '192.168.1.102' });\n  *\n  * board.sendRequest({ url: 'sd/config' })\n  * .then(function(event) {\n  *   console.info('then:', event);\n  * })\n  * .catch(function(event) {\n  *   console.error('catch:', event);\n  * });\n  * ```\n  *\n  * @param  {Object} [settings = {}] Request settings (see {@link BoardRequest} for more details).\n  * @return {Promise<RequestEvent>}\n  */\n  sendRequest(settings = {}) {\n    return this.createRequest(settings).send()\n  }\n\n  /**\n  * Create an command.\n  *\n  * @param  {String} command         Command line.\n  * @param  {Object} [settings = {}] Request settings (see {@link BoardCommand} for more details).\n  * @return {BoardCommand}\n  */\n  createCommand(command, settings = {}) {\n    // wrap request events\n    settings.on = settings.on || {}\n\n    for (let key in requestEventTypes) {\n      let topic    = requestEventTypes[key]\n      let callback = settings.on[topic]\n\n      settings.on[topic] = event => {\n        this.publish('command.' + topic, event)\n        callback && callback(event)\n      }\n    }\n\n    let boardCommand = new BoardCommand(this, command, settings)\n    this.publish(boardTopics.COMMAND_CREATE, boardCommand)\n    return boardCommand\n  }\n\n  /**\n  * Send an command to the board.\n  *\n  * @param  {String} boardCommand\n  * @return {Promise<RequestEvent>}\n  */\n  _sendCommand(boardCommand) {\n    this.publish(boardTopics.COMMAND_SEND, boardCommand)\n\n    return boardCommand.send()\n    .then(event => {\n      this.publish(boardTopics.COMMAND_RESPONSE, event)\n      return Promise.resolve(event)\n    })\n    .catch(event => {\n      this.publish(boardTopics.COMMAND_ERROR, event)\n      return Promise.reject(event)\n    })\n  }\n\n  /**\n  * Create and send an command to the board.\n  *\n  * ```\n  * var board = new Board({ address: '192.168.1.102' });\n  *\n  * board.sendCommand('ls -s sd/')\n  * .then(function(event) {\n  *   console.info('then:', event);\n  *   console.info('data:', event.payload.data);\n  * })\n  * .catch(function(event) {\n  *   console.error('catch:', event);\n  * });\n  * ```\n  *\n  * @param  {String} command         Command line.\n  * @param  {Object} [settings = {}] Request settings (see {@link BoardCommand} for more details).\n  * @return {Promise<RequestEvent>}\n  * @see {@link Board#addCommand}\n  * @see {@link Board#pushCommand}\n  */\n  sendCommand(command, settings = {}) {\n    return this._sendCommand(this.createCommand(command, settings))\n  }\n\n  /**\n  * Create and add the command in command queue.\n  *\n  * @param  {String} command         Command line.\n  * @param  {Object} [settings = {}] Request settings (see {@link BoardCommand} for more details).\n  * @return {BoardCommand}\n  * @see {@link Board#sendCommand}\n  * @see {@link Board#pushCommand}\n  */\n  addCommand(command, settings = {}) {\n    let boardCommand = this.createCommand(command, settings)\n    this.publish(boardTopics.COMMAND_QUEUE_ADD, boardCommand)\n    this.commandQueue.push(boardCommand)\n    return boardCommand\n  }\n\n  /**\n  * Create and add the command in command queue,\n  * then process the command queue if not in pause or locked.\n  *\n  * @param  {String} command         Command line.\n  * @param  {Object} [settings = {}] Request settings (see {@link BoardCommand} for more details).\n  * @return {BoardCommand}\n  * @see {@link Board#sendCommand}\n  * @see {@link Board#addCommand}\n  */\n  pushCommand(command, settings = {}) {\n    let boardCommand = this.addCommand(command, settings)\n    this.processCommandQueue()\n    return boardCommand\n  }\n\n  /**\n  * Process command queue.\n  * @see {@link Board#pauseCommandQueue}\n  * @see {@link Board#stopCommandQueue}\n  * @see {@link Board#resumeCommandQueue}\n  * @see {@link Board#clearCommandQueue}\n  */\n  processCommandQueue() {\n    // command queue locked or empty ?\n    if (this.commandQueueLocked\n    || this.commandQueuePaused\n    || ! this.commandQueue.length) {\n      return\n    }\n\n    // lock the command queue\n    this.commandQueueLocked = true\n\n    // get the older command\n    this.pendingCommand = this.commandQueue.shift()\n\n    // end of queue\n    if (! this.pendingCommand) {\n      this.publish(boardTopics.COMMAND_QUEUE_EMPTY)\n      return\n    }\n\n    this.publish(boardTopics.COMMAND_QUEUE_SEND, this.pendingCommand)\n\n    this._sendCommand(this.pendingCommand)\n    .then(event => event)\n    .catch(event => event)\n    .then(event => {\n      // reset pending command\n      this.pendingCommand = null\n\n      // unlock the command queue\n      this.commandQueueLocked = false\n\n      // process next command in queue\n      this.processCommandQueue()\n    })\n  }\n\n  /**\n  * Pause command queue but let the pending command terminate.\n  * @see {@link Board#processCommandQueue}\n  * @see {@link Board#stopCommandQueue}\n  * @see {@link Board#resumeCommandQueue}\n  * @see {@link Board#clearCommandQueue}\n  */\n  pauseCommandQueue() {\n    this.commandQueuePaused = true\n    this.publish(boardTopics.COMMAND_QUEUE_PAUSE, this.commandQueue)\n  }\n\n  /**\n  * Abort the pending command.\n  */\n  abortPendingCommand() {\n    if (this.pendingCommand) {\n      this.pendingCommand.abort()\n      this.pendingCommand = null\n    }\n  }\n\n  /**\n  * Pause command queue and abort the pending command.\n  * @see {@link Board#processCommandQueue}\n  * @see {@link Board#pauseCommandQueue}\n  * @see {@link Board#resumeCommandQueue}\n  * @see {@link Board#clearCommandQueue}\n  */\n  stopCommandQueue() {\n    this.abortPendingCommand()\n    this.pauseCommandQueue()\n  }\n\n  /**\n  * Resume command queue.\n  * @see {@link Board#processCommandQueue}\n  * @see {@link Board#pauseCommandQueue}\n  * @see {@link Board#stopCommandQueue}\n  * @see {@link Board#clearCommandQueue}\n  */\n  resumeCommandQueue() {\n    this.commandQueuePaused = false\n    this.publish(boardTopics.COMMAND_QUEUE_RESUME, this.commandQueue)\n    this.processCommandQueue()\n  }\n\n  /**\n  * Clear command queue and abort the pending command.\n  * @see {@link Board#processCommandQueue}\n  * @see {@link Board#pauseCommandQueue}\n  * @see {@link Board#stopCommandQueue}\n  * @see {@link Board#resumeCommandQueue}\n  */\n  clearCommandQueue() {\n    this.abortPendingCommand()\n    this.publish(boardTopics.COMMAND_QUEUE_CLEAR, this.commandQueue)\n\n    this.commandQueueLocked = false\n    this.commandQueuePaused = false\n    this.commandQueue       = []\n  }\n\n  /**\n  * Get the board informations.\n  *\n  * @param  {Boolean} [refresh = false]\n  * @return {Promise<BoardInfo|RequestEvent>}\n  */\n  getInfo(refresh = false) {\n    return new Promise((resolve, reject) => {\n      if (! refresh && this.info) {\n        resolve(this.info)\n      }\n\n      return this.sendCommand('version').then(event => {\n        this.info = new BoardInfo(event.payload.data)\n        this.publish(boardTopics.INFO_UPDATE, this.info)\n        resolve(this.info)\n      })\n      .catch(reject)\n    })\n  }\n\n  /** @typedef {Map<String, BoardFolder|BoardFile>} BoardFileList */\n\n  /**\n  * Return a flat file tree for the given path.\n  *\n  * @param  {String}  [path    = '/']    Path to list file from.\n  * @param  {Boolean} [refresh = false]  Force refresh (no cache).\n  * @param  {Boolean} [firstCall = true] Used internaly for recursion.\n  * @return {Promise<BoardFileList|RequestEvent>}\n  */\n  listFiles(path = '/', refresh = false, firstCall = true) {\n    // from cache\n    path = normalizePath(path)\n\n    let tree = path === '/' ? this.fileTree : this.fileTree.list(path)\n\n    if (tree.size && ! refresh) {\n      return Promise.resolve(tree)\n    }\n\n    // try to get the directory contents\n    return this.sendCommand('ls -s ' + path).then(event => {\n      // recursion...\n      let promises = []\n\n      // children collection (file or directory)\n      event.payload.data.forEach(child => {\n        // set new child\n        this.fileTree.set(child)\n\n        // get sub-directory contents\n        if (child.type === 'folder') {\n          promises.push(this.listFiles(child.path, true, false))\n        }\n      })\n\n      // wait for all promises done\n      return Promise.all(promises).then(results => {\n        let tree = this.fileTree.list(path)\n\n        if (firstCall) {\n          this.publish(boardTopics.FILETREE_UPDATE, tree)\n        }\n\n        return Promise.resolve(tree)\n      })\n    })\n  }\n\n  /**\n  * Clear state (M999).\n  *\n  * @return {Promise<RequestEvent>}\n  */\n  clearState() {\n    return this.sendCommand('M999').then(event => {\n      this.halted = false\n      return Promise.resolve(event)\n    })\n  }\n}\n\n// Exports\nexport default Board\nexport { Board }\n\n\n\n// WEBPACK FOOTER //\n// ./board/board.js","import BoardRequest from './request'\nimport * as boardCommands from './commands'\nimport boardTopics from './topics'\n\n/**\n* Board request.\n* @extends {BoardRequest}\n*/\nclass BoardCommand extends BoardRequest {\n  /**\n  * @param {Board}  board       Board instance.\n  * @param {Board}  commandLine Command line, see {@link src/board/commands/index.js} for a list of implemented commands.\n  * @param {Object} settings    See {@link src/board/settings.js~boardSettings}.request for defaults keys/values.\n  * @param {Object} [settings.parseResponse = true] See {@link src/board/settings.js~boardSettings}.request for defaults keys/values.\n  */\n  constructor(board, commandLine, settings = {}) {\n    // Normalize and split the command line\n    commandLine = commandLine.trim().replace(/ +/g, ' ')\n\n    let commandArgs = commandLine.split(' ')\n    let commandName = commandArgs.shift()\n\n    // response...\n    let response\n\n    // parse response by default\n    if (settings.parseResponse === undefined) {\n      settings.parseResponse = true\n    }\n\n    // response parser\n    let responseParser = boardCommands['cmd_' + commandName]\n\n    // not yet implemented\n    if (! responseParser && settings.parseResponse) {\n      response = r => {\n        throw new Error('Sorry! The \"' + commandName + '\" command is not (yet) implemented.')\n      }\n    }\n    else {\n      response = r => {\n        let test = r.trim()\n\n        if (test.startsWith('error:Unsupported command')) {\n          throw new Error('Unsupported command \"' + commandName + '\".')\n        }\n\n        if (test === '!!') {\n          if (! board.halted) {\n            board.halted = true\n            board.publish(boardTopics.STATE_HALT)\n          }\n\n          throw new Error('System halted !')\n        }\n\n        if (commandName === 'M999') {\n          board.publish(boardTopics.STATE_CLEAR, test !== 'ok')\n        }\n\n        return settings.parseResponse ? responseParser(r, commandArgs) : r\n      }\n    }\n\n    // call parent constructor\n    super(board, Object.assign({}, board.settings.request, settings, {\n      data   : commandLine + '\\n',\n      url    : 'command',\n      method : 'POST',\n      filters: { response }\n    }))\n\n    /**\n    * Command line.\n    * @type {String}\n    * @protected\n    */\n    this.commandLine = commandLine\n\n    /**\n    * Command name.\n    * @type {String}\n    * @protected\n    */\n    this.commandName = commandName\n\n    /**\n    * Command arguments.\n    * @type {Array}\n    * @protected\n    */\n    this.commandArgs = commandArgs\n  }\n}\n\n// Exports\nexport default BoardCommand\nexport { BoardCommand }\n\n\n\n// WEBPACK FOOTER //\n// ./board/command.js","/**\n* Clear state.\n*\n* ### on success\n* ```\n* return true if state cleared or false if state not halted\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Boolean}\n* @throws {Error}\n*/\nexport function cmd_M999(raw, args) {\n  return raw.trim() !== 'ok'\n}\n\n\n\n// WEBPACK FOOTER //\n// ./board/commands/M999.js","import { normalizePath } from '../util'\n\n/**\n* Get file content.\n*\n* ### on success\n* ```\n* return \"Raw file contents as text.\"\n* ```\n* ### on error\n* ```\n* throw 'File not found \"xxx\".'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {String}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#L331\n*/\nexport function cmd_cat(raw, args) {\n  let source = normalizePath(args[0] || '')\n\n  if (raw.trim().startsWith('File not found')) {\n    throw new Error('File not found \"' + source + '\".')\n  }\n\n  return raw\n}\n\n\n\n// WEBPACK FOOTER //\n// ./board/commands/cat.js","import { normalizePath } from '../util'\n\n/**\n* Change current folder.\n*\n* ### on success\n* ```\n* return \"ok\"\n* ```\n* ### on error\n* ```\n* throw 'Could not open \"xxx\" directory.'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {String}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#L358\n*/\nexport function cmd_cd(raw, args) {\n  let source = normalizePath(args[0] || '')\n\n  if (raw.trim().startsWith('Could not open directory')) {\n    throw new Error('Could not open \"' + source + '\" directory.')\n  }\n\n  return 'ok'\n}\n\n\n\n// WEBPACK FOOTER //\n// ./board/commands/cd.js","import { get_temp } from './get_temp'\nimport { get_pos } from './get_pos'\nimport { get_wcs } from './get_wcs'\nimport { get_state } from './get_state'\nimport { get_status } from './get_status'\nimport { get_ik } from './get_ik'\nimport { get_fk } from './get_fk'\n\n/**\n* Get command `temp|pos|wcs|state|status|fk|ik`.\n*\n* - get temp [bed|hotend]\n* - get fk|ik [-m] x[,y,z]\n*\n* ### on success\n* ```\n* return \"...\"\n* ```\n* ### on error\n* ```\n* throw 'Unknown option \"xxx\".'\n* throw 'Sorry! The \"get xxx\" command is not (yet) implemented.'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Mixed}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#741\n*/\nexport function cmd_get(raw, args) {\n  // raw response\n  raw = raw.trim()\n\n  // option\n  let option = (args.shift() || '').toLowerCase()\n\n  // file not found\n  if (raw.startsWith('error:unknown option')) {\n    throw new Error('Unknown option \"' + option + '\".')\n  }\n\n  let func\n\n  switch (option) {\n    case 'temp':\n      func = get_temp\n      break\n    case 'pos':\n      func = get_pos\n      break\n    case 'wcs':\n      func = get_wcs\n      break\n    case 'state':\n      func = get_state\n      break\n    case 'status':\n      func = get_status\n      break\n    case 'ik':\n      func = get_ik\n      break\n    case 'fk':\n      func = get_fk\n      break\n    default:\n     throw new Error('Sorry! The \"get ' + option + '\" command is not (yet) implemented.')\n  }\n\n  return func(raw, args)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./board/commands/get.js","/**\n* Get forward kinematics.\n*\n* ### on success\n* ```\n* return {\n*   \"move\": false,\n*   \"x\"   : 10,\n*   \"y\"   : 10,\n*   \"z\"   : 10\n* }\n* ```\n* ### on error\n* ```\n* throw 'Usage: get ik [-m] x[,y,z].'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Object}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#771\n*/\nexport function get_fk(raw, args) {\n  let move = args.shift() === '-m'\n\n  // error\n  if (raw.startsWith('error:')) {\n    throw new Error('Usage: get fk [-m] x[,y,z].')\n  }\n\n  let matches = raw.match(/cartesian= X ([0-9\\.]+), Y ([0-9\\.]+), Z ([0-9\\.]+)/)\n\n  return {\n    move,\n    x: parseFloat(matches[1]),\n    y: parseFloat(matches[2]),\n    z: parseFloat(matches[3])\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./board/commands/get_fk.js","/**\n* Get inverse kinematics.\n*\n* ### on success\n* ```\n* return '...'\n* ```\n* ### on error\n* ```\n* throw 'Usage: get ik [-m] x[,y,z].'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Object}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#771\n*/\nexport function get_ik(raw, args) {\n  let move = args.shift() === '-m'\n\n  // error\n  if (raw.startsWith('error:')) {\n    throw new Error('Usage: get ik [-m] x[,y,z].')\n  }\n\n  let matches = raw.match(/actuator= X ([0-9\\.]+), Y ([0-9\\.]+), Z ([0-9\\.]+)/)\n\n  return {\n    move,\n    x: parseFloat(matches[1]),\n    y: parseFloat(matches[2]),\n    z: parseFloat(matches[3])\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./board/commands/get_ik.js","/**\n* Get position.\n*\n* ### on success\n* ```\n* return {\n*   \"WCS\": {\n*     \"command\"    : \"M114\",\n*     \"description\": \"Position of all axes\",\n*     \"x\"          : 0,\n*     \"y\"          : 0,\n*     \"z\"          : 0\n*   },\n*   \"WPOS\": {\n*     \"command\"    : \"M114.1\",\n*     \"description\": \"Real time position of all axes\"\n*     // , x, y, z\n*   },\n*   \"MPOS\": {\n*     \"command\"    : \"M114.2\",\n*     \"description\": \"Real time machine position of all axes\"\n*     // , x, y, z\n*   },\n*   \"APOS\": {\n*     \"command\"    : \"M114.3\",\n*     \"description\": \"Real time actuator position of all actuators\"\n*     // , x, y, z\n*   },\n*   \"LMS\": {\n*     \"command\"    : \"M114.4\",\n*     \"description\": \"Last milestone\"\n*     // , x, y, z\n*   },\n*   \"LMP\": {\n*     \"command\"    : \"M114.5\",\n*     \"description\": \"Last machine position\"\n*     // , x, y, z\n*   }\n* }\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Object}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#818\n*/\nexport function get_pos(raw, args) {\n  // last C: X:0.0000 Y:0.0000 Z:0.0000\n  // realtime WPOS: X:0.0000 Y:0.0000 Z:0.0000\n  // MPOS: X:0.0000 Y:0.0000 Z:0.0000\n  // APOS: X:0.0000 Y:0.0000 Z:0.0000\n  // LMS: X:0.0000 Y:0.0000 Z:0.0000\n  // LMP: X:0.0000 Y:0.0000 Z:0.0000\n  // split on new lines\n  let lines = raw.split('\\n')\n  let key, positions = {}\n\n  lines.forEach(line => {\n    let r = parsePositionString(line)\n    positions[r.key] = r.position\n  })\n\n  // split response text on new lines\n  return positions\n}\n\n// Parse position string.\n// WCS : M114   - Last WCS.\n// WPOS: M114.1 - Realtime WCS.\n// MPOS: M114.2 - Realtime machine coordinate system.\n// APOS: M114.3 - Realtime actuator position.\n// LMS : M114.4 - Last milestone.\n// LMP : M114.5 - Last machine position.\nfunction parsePositionString(line) {\n  let parts  = line.split(':')\n  let key    = parts.shift().replace(' ', '_').toUpperCase()\n  let coords = parts.join(':').trim().split(' ')\n\n  let position = {\n    x  : parseFloat(coords[0].substr(2)),\n    y  : parseFloat(coords[1].substr(2)),\n    z  : parseFloat(coords[2].substr(2))\n  }\n\n  if (key === 'LAST_C') {\n    key = 'WCS'\n  }\n  else if (key === 'REALTIME_WPOS') {\n    key = 'WPOS'\n  }\n\n  switch (key) {\n    case 'WCS':\n      position.command     = 'M114'\n      position.description = 'Position of all axes'\n      break\n    case 'WPOS':\n      position.command     = 'M114.1'\n      position.description = 'Real time position of all axes'\n      break\n    case 'MPOS':\n      position.command     = 'M114.2'\n      position.description = 'Real time machine position of all axes'\n      break\n    case 'APOS':\n      position.command     = 'M114.3'\n      position.description = 'Real time actuator position of all actuators'\n      break\n    case 'LMS':\n      position.command     = 'M114.4'\n      position.description = 'Last milestone'\n      break\n    case 'LMP':\n      position.command     = 'M114.5'\n      position.description = 'Last machine position'\n      break\n    default:\n      position.command     = 'M114.?'\n      position.description = 'Unknown type'\n  }\n\n  return { key, position }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./board/commands/get_pos.js","/**\n* Get state.\n*\n* ### on success\n* ```\n* return\n* {\n*   \"modal\"          : \"G0\",\n*   \"wcs\"            : \"G54\",\n*   \"plane_selection\": \"G17\",\n*   \"unit\"           : \"G21\",\n*   \"distance_mode\"  : \"G90\",\n*   \"path_control\"   : \"G94\",\n*   \"program_pause\"  : \"M0\",\n*   \"stop_tool\"      : \"M5\",\n*   \"stop_coolant\"   : \"M9\",\n*   \"tool\"           : \"T0\",\n*   \"feed_rate\"      : \"F4000.0000\",\n*   \"s_value\"        : \"S0.8000\",\n*   \"state\"          : [ \"G0\", \"G54\", \"G17\", \"G21\", \"G90\", \"G94\", \"M0\", \"M5\", \"M9\", \"T0\", \"F4000.0000\", \"S0.8000\" ]\n* }\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Object}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#832\n*/\nexport function get_state(raw, args) {\n  let state = raw.slice(1, -1).split(' ')\n\n  return {\n    modal          : state[0],\n    wcs            : state[1],\n    plane_selection: state[2],\n    unit           : state[3],\n    distance_mode  : state[4],\n    path_control   : state[5],\n    program_pause  : state[6],\n    stop_tool      : state[7],\n    stop_coolant   : state[8],\n    tool           : state[9],\n    feed_rate      : state[10],\n    s_value        : state[11],\n    state          : state\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./board/commands/get_state.js","/**\n* Get status.\n*\n* ### on success\n* ```\n* return\n* {\n*   \"status\"   : \"idle\", // [idle, alarm, home, hold, run]\n*   \"machine\"  : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"workspace\": { \"x\": 0, \"y\": 0, \"z\": 0 }\n* }\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Object}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#847\n* @see https://github.com/Smoothieware/Smoothieware/blob/f7d999cff4a33d83b09ce136c122b3b7b2f1c69a/src/libs/Kernel.cpp#L163\n*/\nexport function get_status(raw, args) {\n  let parts = raw.slice(1, -1).toLowerCase().replace(/(w|m)pos:/g, '').split(',')\n\n  return {\n    status: parts[0],\n    machine: {\n      x: parseFloat(parts[1]),\n      y: parseFloat(parts[2]),\n      z: parseFloat(parts[3])\n    },\n    workspace: {\n      x: parseFloat(parts[4]),\n      y: parseFloat(parts[5]),\n      z: parseFloat(parts[6])\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./board/commands/get_status.js","/**\n* Get temperature.\n*\n* ### on success\n* ```\n* // get temp\n* return [\n*   {\n*     \"designator\": \"T\",\n*     \"id\": 57988,\n*     \"current\": null, // null means the sensor is not properly connected, or it is damaged in some way.\n*     \"target\": 0,\n*     \"pwm\": 0\n*   },\n*   {\n*     \"designator\": \"B\",\n*     \"id\": 22060,\n*     \"current\": null,\n*     \"target\": 0,\n*     \"pwm\": 0\n*   }\n* ]\n* ```\n* ```\n* // get temp bed\n* return {\n*   \"designator\": \"bed\",\n*   \"current\": null,\n*   \"target\": 0,\n*   \"pwm\": 0\n* }\n* ```\n* ### on error\n* ```\n* throw 'No heaters found.'\n* throw '\"xxx\" is not a known temperature device.'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Object}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#745\n*/\nexport function get_temp(raw, args) {\n  if (raw.startsWith('no heaters found')) {\n    throw new Error('No heaters found.')\n  }\n\n  // device [bed|hotend]\n  let device = (args[0] || 'all').toLowerCase()\n\n  if (raw.endsWith('is not a known temperature device')) {\n    throw new Error('\"' + device + '\" is not a known temperature device.')\n  }\n\n  let result\n\n  if (device === 'all') {\n    // [T (57988) temp: inf/0.000000 @0]\n    return raw.split('\\n').map(parseTempString)\n  }\n\n  // \"bed temp: inf/0.000000 @0\"\n  let matches = raw.match(/([a-z]+) temp: (inf|[0-9\\.]+)\\/(inf|[0-9\\.]+) @([0-9]+)/)\n\n  return {\n    device : matches[1],\n    current: parseFloat(matches[2]),\n    target : parseFloat(matches[3]),\n    pwm    : parseInt(matches[4]),\n  }\n}\n\nfunction parseTempString(temp) {\n  // T (57988) temp: inf/0.000000 @0\n  let matches = temp.match(/(T|B) \\(([0-9]+)\\) temp: (inf|[0-9\\.]+)\\/(inf|[0-9\\.]+) @([0-9]+)/)\n\n  return {\n    designator: matches[1],\n    id        : parseInt(matches[2]),\n    current   : parseFloat(matches[3]),\n    target    : parseFloat(matches[4]),\n    pwm       : parseInt(matches[5]),\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./board/commands/get_temp.js","/**\n* Get wcs state.\n*\n* ### on success\n* ```\n* return {\n*   \"current\": \"G54\",\n*   \"tool\"   : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"prob\"   : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G54\"    : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G55\"    : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G56\"    : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G57\"    : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G58\"    : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G59\"    : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G59.1\"  : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G59.2\"  : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G59.3\"  : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G28\"    : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G30\"    : { \"x\": 0, \"y\": 0, \"z\": 0 },\n*   \"G92\"    : { \"x\": 0, \"y\": 0, \"z\": 0 }\n*}\n* ```\n* ### on error\n* ```\n* throw '...'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Object}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#828\n*/\nexport function get_wcs(raw, args) {\n  // [current WCS: G54]\n  // [G54:0.0000,0.0000,0.0000]\n  // [G55:0.0000,0.0000,0.0000]\n  // [G56:0.0000,0.0000,0.0000]\n  // [G57:0.0000,0.0000,0.0000]\n  // [G58:0.0000,0.0000,0.0000]\n  // [G59:0.0000,0.0000,0.0000]\n  // [G59.1:0.0000,0.0000,0.0000]\n  // [G59.2:0.0000,0.0000,0.0000]\n  // [G59.3:0.0000,0.0000,0.0000]\n  // [G28:0.0000,0.0000,0.0000]\n  // [G30:0.0000,0.0000,0.0000]\n  // [G92:0.0000,0.0000,0.0000]\n  // [Tool Offset:0.0000,0.0000,0.0000]\n  // [PRB:0.0000,0.0000,0.0000:0]\n  let lines = raw.split('\\n')\n\n  // unwrap line ([...])\n  lines = lines.map(line => line.slice(1, -1))\n\n  let wcs = {\n    current: lines.shift().split(': ').pop()\n  }\n\n  lines.forEach(line => {\n    let parts  = line.split(':')\n    let code   = parts.shift().toUpperCase()\n    let coords = parts.shift().split(',')\n\n    if (code === 'TOOL OFFSET') {\n      code = 'tool'\n    }\n    else if (code === 'PRB') {\n      code = 'prob'\n    }\n\n    wcs[code] = {\n      x: parseFloat(coords[0]),\n      y: parseFloat(coords[1]),\n      z: parseFloat(coords[2])\n    }\n  })\n\n  return wcs\n}\n\n\n\n// WEBPACK FOOTER //\n// ./board/commands/get_wcs.js","import { normalizePath } from '../util'\n\n/**\n* Get command help list.\n*\n* ### on success\n* ```\n* return \"List of command help. One by line.\"\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {String}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#1124\n*/\nexport function cmd_help(raw, args) {\n  return raw.trim()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./board/commands/help.js","import { normalizePath } from '../util'\n\n/**\n* Parse `ls` command response.\n*\n* ### on success\n* - If the `-s` parameter is not provided, the size is set to 0.\n* - The size is also set to 0 on directories.\n* ```\n* return [\n*   {\"extension\":\"\",\"name\":\"project1\",\"path\":\"/sd/project1\",\"parent\":\"/sd\",\"type\":\"folder\",\"size\":0},\n*   {\"extension\":\".cur\",\"name\":\"firmware.cur\",\"path\":\"/sd/firmware.cur\",\"parent\":\"/sd\",\"type\":\"file\",\"size\":368144},\n*   {\"extension\":\"\",\"name\":\"config\",\"path\":\"/sd/config\",\"parent\":\"/sd\",\"type\":\"file\",\"size\":29417},\n*   {\"extension\":\".gcode\",\"name\":\"file1.gcode\",\"path\":\"/sd/file1.gcode\",\"parent\":\"/sd\",\"type\":\"file\",\"size\":1914257},\n*   {\"extension\":\".gcode\",\"name\":\"file2.gcode\",\"path\":\"/sd/file2.gcode\",\"parent\":\"/sd\",\"type\":\"file\",\"size\":0},\n*   {\"extension\":\".gcode\",\"name\":\"file3.gcode\",\"path\":\"/sd/file3.gcode\",\"parent\":\"/sd\",\"type\":\"file\",\"size\":1062811}\n* ]\n* ```\n* ### on error\n* ```\n* throw 'Could not open \"xxx\" directory.'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Array}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#L284\n*/\nexport function cmd_ls(raw, args) {\n  // size flag\n  let size = args[0] === '-s'\n\n  size && args.shift()\n\n  // extract and normalize path\n  let path = normalizePath(args[0] || '')\n\n  // raw response\n  raw = raw.trim()\n\n  // file not found\n  if (raw.startsWith('Could not open directory')) {\n    throw new Error('Could not open \"' + path + '\" directory.')\n  }\n\n  // excluded files\n  let excludes = [\"system volume information/\"]\n\n  // split lines\n  let lines = raw.split('\\n')\n  let info  = null\n\n  // empty files list\n  let files = []\n  let file  = null\n  let isDir = false\n\n  let extension\n  let rootPath = path !== '/' ? path : ''\n\n  // for each lines (file)\n  lines.forEach(line => {\n    // remove trailing spaces\n    line = line.trim()\n\n    if (! excludes.includes(line)) {\n      // extract file/directory info (name/size)\n      info = line.trim().match(/^([a-z0-9_\\-\\.]+) ?(\\/| [0-9]+)?$/, 'gi')\n\n      if (info) {\n        // is directory ?\n        isDir = info[2] === '/'\n\n        extension = ''\n\n        if (info[1].includes('.')) {\n          extension = '.' + info[1].split('.').pop()\n        }\n\n        // set file info\n        files.push({\n          name: info[1],\n          extension: extension,\n          parent: rootPath.length ? rootPath : '/',\n          path: rootPath + '/' + info[1],\n          type: isDir ? 'folder' : 'file',\n          size: isDir ? 0 : parseInt(info[2] || 0)\n        })\n      }\n    }\n  })\n\n  return files\n}\n\n\n\n// WEBPACK FOOTER //\n// ./board/commands/ls.js","import { normalizePath } from '../util'\n\n/**\n* Get informations about memory usage.\n*\n* ### on success\n* ```\n* return {\n*   \"BLOCK_SIZE\"    : 100\n*   \"UNUSED_HEAP\"   : 8344,\n*   \"USED_HEAP_SIZE\": 18008,\n*   \"FREE\"          : 2572,\n*   \"ALLOCATED\"     : 14348,\n*   \"TOTAL_FREE_RAM\": 10916,\n*   \"AHB0\": {\n*     \"free\"  : 13652,\n*     \"total\" : 15184, // verbose mode only\n*     \"used\"  : 1532,  // verbose mode only\n*     \"chunks\": [      // verbose mode only\n*        {\n*         \"address\": \"0x2007c4b0\",\n*         \"offset\": 0,\n*         \"bytes\": 268,\n*         \"free\": false\n*        }\n*     //, ...\n*     ]\n*   },\n*   \"AHB1\": {\n*     \"free\"  : 10440,\n*     \"total\" : 10440, // verbose mode only\n*     \"used\"  : 0      // verbose mode only\n*     \"chunks\": [...]  // verbose mode only\n*   },\n*   \"CHUNKS\": [ // verbose mode only\n*     {\n*       \"address\": \"0x10000CF8\",\n*       \"bytes\"  : 32,\n*       \"free\"   : false\n*     }\n*     //, ...\n*   ]\n* }\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {String}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#578\n*/\nexport function cmd_mem(raw, args) {\n  // trim raw response\n  raw = raw.trim()\n\n  // verbose mode\n  let verbose = args[0] === '-v'\n\n  // // Split on new line\n  let lines = raw.split(/[\\r\\n|\\r|\\n]+/gm)\n\n  let memory = {}\n\n  if (verbose) {\n    memory.CHUNKS = []\n  }\n\n  let setValue = line => {\n    let [key, value] = line.split(': ');\n\n    let bytes = parseInt(value.trim().replace(/ bytes$/, ''))\n\n    key = key.trim().replace(/ +/gm, '_').toUpperCase()\n\n    if (key === 'FREE_AHB0') {\n      key = 'AHB0'\n    }\n\n    if (key.startsWith('AHB')) {\n      memory[key] = { free: bytes }\n    }\n    else {\n      memory[key] = bytes\n    }\n  }\n\n  let target = null\n\n  lines.forEach(line => {\n    line = line.trim()\n\n    if (line.startsWith('Allocated') || line.startsWith('Free AHB0')) {\n      line = line.split(', ')\n      setValue(line[1])\n      line = line[0]\n    }\n\n    if (verbose && line.startsWith('Chunk:')) {\n      // [\"Chunk: 7\", \"Address: 0x10001028\", \"Size: 20\", \"\"]\n      let chunk = line.split('  ')\n\n      memory.CHUNKS.push({\n        address: chunk[1].split(': ')[1],\n        bytes  : parseInt(chunk[2].split(': ')[1]),\n        free   : chunk[3] !== undefined\n      })\n    }\n    else if (verbose && line.startsWith('Start:')) {\n      target = memory['AHB' + (target === null ? '0' : '1')]\n      target.chunks = []\n    }\n    else if (verbose && line.startsWith('Chunk at')) {\n      // \"Chunk at 0x2007c8a8 (+1016): used, 516 bytes\"\n      // \"Chunk at 0x2007caac (+1532): free, 13652 bytes\"\n      let chunk = line.match(/^Chunk at ([0-9a-zA-Z]+) \\( *\\+([0-9]+)\\): (free|used), ([0-9]+) bytes$/)\n\n      target.chunks.push({\n        address: chunk[1],\n        offset : parseInt(chunk[2]),\n        bytes  : parseInt(chunk[4]),\n        free   : chunk[3] === 'free'\n      })\n    }\n    else if (verbose && line.startsWith('End:')) {\n      // total 10440b, free: 10440b\n      let end = line.match(/^End: total ([0-9]+)b, free: ([0-9]+)b$/)\n      target.total = parseInt(end[1])\n      target.used  = target.total - target.free\n    }\n    else {\n      setValue(line)\n    }\n  })\n\n  return memory\n}\n\n\n\n// WEBPACK FOOTER //\n// ./board/commands/mem.js","import { normalizePath } from '../util'\n\n/**\n* Move a file.\n*\n* ### on success\n* ```\n* return {\n*   source: '/sd/source.gcode',\n*   target: '/sd/target.gcode'\n* }\n* ```\n* ### on error\n* ```\n* throw 'Could not move \"xxx\" to \"yyy\".'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Object}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#L339\n*/\nexport function cmd_mv(raw, args) {\n  // raw response\n  raw = raw.trim()\n\n  let source = normalizePath(args[0] || '')\n  let target = normalizePath(args[1] || '')\n\n  // file not found\n  if (raw.startsWith('Could not rename')) {\n    throw new Error('Could not move \"' + source + '\" to \"' + target + '\".')\n  }\n\n  return { source, target }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./board/commands/mv.js","/**\n* Parse `ok` command response.\n*\n* ### on success\n* ```\n* return \"ok\"\n* ```\n* ### on error\n* ```\n* throw \"ko\"\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {String}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#L272\n*/\nexport function cmd_ok(raw, args) {\n  if (raw.trim() === 'ok') {\n    return 'ok'\n  }\n\n  throw new Error('ko')\n}\n\n\n\n// WEBPACK FOOTER //\n// ./board/commands/ok.js","import { normalizePath } from '../util'\n\n/**\n* Get current working directory.\n*\n* ### on success\n* ```\n* return \"/sd/folder\"\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {String}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#L373\n*/\nexport function cmd_pwd(raw, args) {\n  return raw.trim()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./board/commands/pwd.js","import { normalizePath } from '../util'\n\n/**\n* Reset the board.\n*\n* ### on success\n* ```\n* return \"Smoothie out. Peace. Rebooting in 5 seconds...\\r\\n\"\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {String}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#L647\n*/\nexport function cmd_reset(raw, args) {\n  return raw.trim()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./board/commands/reset.js","import { normalizePath } from '../util'\n\n/**\n* Remove a file.\n*\n* ### on success\n* ```\n* return \"/sd/removed_file.gcode\"\n* ```\n* ### on error\n* ```\n* throw 'Could not remove \"xxx\".'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {String}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#L331\n*/\nexport function cmd_rm(raw, args) {\n  // raw response\n  raw = raw.trim()\n\n  let source = normalizePath(args[0] || '')\n\n  // file not found\n  if (raw.startsWith('Could not delete')) {\n    throw new Error('Could not remove \"' + source + '\".')\n  }\n\n  return source\n}\n\n\n\n// WEBPACK FOOTER //\n// ./board/commands/rm.js","/**\n* Set temperature.\n*\n* - set_temp [bed|hotend]\n*\n* ### on success\n* ```\n* return {\n*   \"device\": \"bed\",\n*   \"target\": 180\n* }\n* ```\n* ### on error\n* ```\n* throw '\"xxx\" is not a known temperature device.'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Object}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#857\n*/\nexport function cmd_set_temp(raw, args) {\n  // raw response\n  raw = raw.trim()\n\n  // device\n  let device = (args.shift() || '').toLowerCase()\n\n  // error\n  if (raw.endsWith('is not a known temperature device')) {\n    throw new Error('\"' + device + '\" is not a known temperature device.')\n  }\n\n  // new temperature\n  let target = parseInt(args.shift() || 0)\n\n  return { device, target }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./board/commands/set_temp.js","import { normalizePath } from '../util'\n\n/**\n* Switch module.\n*\n* `switch fan on` or `switch fan 150`\n*\n* ### on success\n* ```\n* return \"ok\"\n* ```\n* ### on error\n* ```\n* throw '\"xxx\" is not a known switch device.'\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {String}\n* @throws {Error}\n* @see https://github.com/Smoothieware/Smoothieware/blob/d79254323f4bb951426c6add29a4451130eaa018/src/modules/utils/simpleshell/SimpleShell.cpp#L916\n*/\nexport function cmd_switch(raw, args) {\n  // raw response\n  raw = raw.trim()\n\n  // device\n  let device = args.shift() || ''\n\n  // error\n  if (raw.endsWith('is not a known switch device')) {\n    throw new Error('\"' + device + '\" is not a known switch device.')\n  }\n\n  return { device, value: args.shift() || '' }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./board/commands/switch.js","/**\n* Parse version command response.\n*\n* ### on success\n* ```\n* return {\n*   branch: \"edge\",\n*   hash  : \"9ab4538\",\n*   date  : \"Oct 10 2016 04:09:42\",\n*   mcu   : \"LPC1769\",\n*   clock : \"120MHz\"\n* }\n* ```\n* ### on error\n* ```\n* throw \"Unknown version string\"\n* ```\n* @param  {String}   raw  Raw command response string.\n* @param  {String[]} args Command arguments.\n* @return {Object}\n* @throws {Error}\n*/\nexport function cmd_version(raw, args) {\n  // version pattern\n  let pattern = /Build version: (.*), Build date: (.*), MCU: (.*), System Clock: (.*)/\n\n  // test the pattern\n  let info = raw.trim().match(pattern)\n\n  if (info) {\n    // split branch-hash on dash\n    let branch = info[1].split('-')\n\n    // resolve\n    return {\n      branch: branch[0].trim(),\n      hash  : branch[1].trim(),\n      date  : info[2].trim(),\n      mcu   : info[3].trim(),\n      clock : info[4].trim()\n    }\n  }\n\n  // reject\n  throw new Error('Unknown version string')\n}\n\n\n\n// WEBPACK FOOTER //\n// ./board/commands/version.js","import { normalizePath, filename } from './util'\n\n/**\n* Board file class.\n*/\nclass BoardFile {\n  /**\n  * @param {Object} file File object from `ls -s` command.\n  */\n  constructor(file) {\n    /**\n    * Parent folder path `/sd/my_folder`.\n    * @type {String}\n    */\n    this.parent = file.parent\n\n    /**\n    * File size (bytes).\n    * @type {Integer}\n    */\n    this.size = file.size\n\n    /**\n    * File path `/sd/my_folder/my_file.ext`.\n    * @type {String}\n    */\n    this.path = file.path\n\n    /**\n    * File name with extension `my_file.ext`.\n    * @type {String}\n    */\n    this.name = file.name\n\n    /**\n    * File extension with starting dot `.gcode`.\n    * @type {String}\n    */\n    this.extension = file.extension\n  }\n}\n\n/**\n* Board folder class.\n*/\nclass BoardFolder {\n  /**\n  * @param {Object} folder Folder object from `ls -s` command.\n  */\n  constructor(folder) {\n    /**\n    * Parent folder path `/sd`.\n    * @type {String}\n    */\n    this.parent = file.parent\n\n    /**\n    * Folder size (bytes).\n    * @type {Integer}\n    */\n    this.size = file.size\n\n    /**\n    * Folder path `/sd/my_folder`.\n    * @type {String}\n    */\n    this.path = file.path\n\n    /**\n    * Folder name `my_folder`.\n    * @type {String}\n    */\n    this.name = file.name\n  }\n}\n\n/**\n* Board file tree class.\n*/\nclass BoardFileTree {\n  /**\n  * Constructor...\n  */\n  constructor() {\n    /**\n    * Flat file tree.\n    * @type {Map}\n    */\n    this.tree = new Map()\n\n    /**\n    * File tree size (bytes).\n    * @type {Integer}\n    */\n    this.size = 0\n  }\n\n  /**\n  * Make and return a child object.\n  *\n  * @param  {Object} child Child object from `ls -s` command.\n  * @return {BoardFile|BoardFolder}\n  * @protected\n  */\n  makeChild(child) {\n    return child.type === 'file' ? new BoardFile(child) : new BoardFolder(child)\n  }\n\n  /**\n  * Update tree size.\n  *\n  * @param  {BoardFile|BoardFolder} child\n  * @param  {Integer} size\n  * @protected\n  */\n  updateSize(child, size) {\n    this.size += size\n\n    let parent = this.tree.get(child.parent)\n\n    while (parent) {\n      parent.size += size\n      parent = this.tree.get(parent.parent)\n    }\n  }\n\n  /**\n  * Remove a child and all of his children.\n  *\n  * @param  {BoardFile|BoardFolder} child Child name or object to remove.\n  * @return {Integer|null} Number of child removed.\n  */\n  remove(child) {\n    let path = child.path || normalizePath(child)\n    let file = this.tree.get(path)\n\n    if (! file) {\n      return null\n    }\n\n    let removed = 1\n\n    this.tree.delete(file.path)\n    this.updateSize(file, -file.size)\n\n    if (file instanceof BoardFolder) {\n      for (let childPath of this.tree.keys()) {\n        if (childPath.startsWith(file.path + '/')) {\n          this.tree.delete(childPath)\n          removed++\n        }\n      }\n    }\n\n    return removed\n  }\n\n  /**\n  * Set a new child.\n  *\n  * @param {Object} child Child object from `ls -s` command.\n  */\n  set(child) {\n    let file = this.makeChild(child)\n\n    this.remove(file.path)\n    this.tree.set(file.path, file)\n    this.updateSize(file, file.size)\n  }\n\n  /**\n  * Return if child path exists.\n  *\n  * @param  {String} path\n  * @return {Boolean}\n  */\n  has(path) {\n    return this.tree.has(normalizePath(path))\n  }\n\n  /**\n  * Return a child from path if exists.\n  *\n  * @param  {String} path\n  * @return {BoardFile|BoardFolder|null}\n  */\n  get(path) {\n    return this.tree.get(normalizePath(path))\n  }\n\n  /**\n  * Return all children from path.\n  *\n  * @param  {String} path\n  * @return {Map}\n  */\n  list(path) {\n    let tree = new Map()\n\n    path = normalizePath(path)\n\n    if (path !== '/') {\n      path += '/'\n    }\n\n    for (let childPath of this.tree.keys()) {\n      if (childPath.startsWith(path)) {\n        tree.set(childPath, this.tree.get(childPath))\n      }\n    }\n\n    return tree\n  }\n}\n\n// Exports\nexport default BoardFileTree\nexport { BoardFileTree, BoardFolder, BoardFile }\n\n\n\n// WEBPACK FOOTER //\n// ./board/filetree.js","import Board from './board'\nimport boardTopics from './topics'\nimport * as boardCommands from './commands'\n\nexport default Board\nexport { Board, boardTopics, boardCommands }\n\n\n\n// WEBPACK FOOTER //\n// ./board/index.js","/**\n* Board info.\n*/\nclass BoardInfo {\n  /**\n  * @param {Object} info Object from the `version` command.\n  */\n  constructor(info) {\n    /**\n    * @type {String}\n    * @protected\n    */\n    this.branch = null\n\n    /**\n    * @type {String}\n    * @protected\n    */\n    this.hash = null\n\n    /**\n    * @type {String}\n    * @protected\n    */\n    this.date = null\n\n    /**\n    * @type {String}\n    * @protected\n    */\n    this.mcu = null\n\n    /**\n    * @type {String}\n    * @protected\n    */\n    this.clock = null\n\n    // merge info object\n    Object.assign(this, info)\n  }\n}\n\n// Exports\nexport default BoardInfo\nexport { BoardInfo }\n\n\n\n// WEBPACK FOOTER //\n// ./board/info.js","/**\r\n* Defaults board settings.\r\n* @type     {Object<String, Mixed>}\r\n* @property {String}   address                       IP or hostname without protocol prefix.\r\n* @property {Object}   request                       Request settings, see {@link src/request/settings.js~requestSettings} for defaults keys/values.\r\n* @property {Integer}  [request.timeout      = 0]    Timeout for this request in milliseconds.\r\n* @property {Integer}  [request.maxAttempts  = 3]    Maximum number of attemps before rejection.\r\n* @property {Integer}  [request.attemptDelay = 1000] Delay in milliseconds between two attemps.\r\n* @property {Function} [request.filters.status]      Default to 200 OK `function(s) { return s === 200 }`.\r\n*/\r\nconst boardSettings = {\r\n  address: undefined,\r\n  request: {\r\n    timeout     : 0,\r\n    maxAttempts : 3,\r\n    attemptDelay: 1000,\r\n    filters     : { status: status => status === 200 }\r\n  }\r\n}\r\n\r\nexport default boardSettings\r\nexport { boardSettings }\r\n\n\n\n// WEBPACK FOOTER //\n// ./board/settings.js","/**\n* @external {ProgressEvent} https://developer.mozilla.org/fr/docs/Web/API/ProgressEvent\n*/\n\n/**\n* Request event.\n*/\nclass RequestEvent {\n  /**\n  * @param {String}        type    Event type, see {@link src/request/event/types.js} for possible values.\n  * @param {ProgressEvent} event   Original progress event.\n  * @param {Request}       request Request instance.\n  * @param {RequestProgressPayload|RequestResponsePayload|RequestAttemptPayload|Error}\n  *                        payload Request payload.\n  */\n  constructor(type, event, request, payload = null) {\n    /**\n    * Event type, see {@link src/request/event/types.js} for possible values.\n    * @type {String}\n    * @protected\n    */\n    this.type = type\n\n    /**\n    * Original progress event.\n    * @type {ProgressEvent}\n    * @protected\n    */\n    this.event = event\n\n    /**\n    * Request instance.\n    * @type {Request}\n    * @protected\n    */\n    this.request = request\n\n    /**\n    * Event payload.\n    * @type {RequestProgressPayload|RequestResponsePayload|RequestAttemptPayload|Error}\n    * @protected\n    */\n    this.payload = payload\n  }\n}\n\n// Exports\nexport default RequestEvent\nexport { RequestEvent }\n\n\n\n// WEBPACK FOOTER //\n// ./request/event/request.js","/**\n* Attempt payload.\n*/\nclass RequestAttemptPayload {\n  /**\n  * @param {Request} request\n  */\n  constructor(request) {\n    /**\n    * Number of executed attempts.\n    * @type {Integer}\n    * @protected\n    */\n    this.done = request.attempts\n\n    /**\n    * Attempts number.\n    * @type {Integer}\n    * @protected\n    */\n    this.num = this.done + 1\n\n    /**\n    * Maximum number of attempts.\n    * @type {Integer}\n    * @protected\n    */\n    this.max = request.settings.maxAttempts\n\n    /**\n    * Delay between two attempt.\n    * @type {Integer}\n    * @protected\n    */\n    this.delay = request.settings.attemptDelay\n  }\n}\n\n// Exports\nexport default RequestAttemptPayload\nexport { RequestAttemptPayload }\n\n\n\n// WEBPACK FOOTER //\n// ./request/payload/attempt.js","/**\n* Progression payload.\n*/\nclass RequestProgressPayload {\n  /**\n  * @param {ProgressEvent} event Original progress event.\n  */\n  constructor(event) {\n    /**\n    * Total bytes.\n    * @type {Integer}\n    * @protected\n    */\n    this.total = event.total || 0\n\n    /**\n    * Loaded bytes.\n    * @type {Integer}\n    * @protected\n    */\n    this.loaded = event.loaded || 0\n\n    /**\n    * Is computable.\n    * @type {Boolean}\n    * @protected\n    */\n    this.computable = event.lengthComputable\n\n    /**\n    * Loaded percent.\n    * @type {Integer}\n    * @protected\n    */\n    this.percent = this.computable ? parseInt(this.loaded / this.total * 100) : 0\n  }\n}\n\n// Exports\nexport default RequestProgressPayload\nexport { RequestProgressPayload }\n\n\n\n// WEBPACK FOOTER //\n// ./request/payload/progress.js","/**\n* Response payload.\n*/\nclass RequestResponsePayload {\n  /**\n  * @param {XMLHttpRequest} xhr    An `XMLHttpRequest` instance.\n  * @param {Function}       filter Response filter.\n  */\n  constructor(xhr, filter = null) {\n    /**\n    * Response status code.\n    * @type {Integer}\n    * @protected\n    */\n    this.status = xhr.status\n\n    /**\n    * Respons status text.\n    * @type {String}\n    * @protected\n    */\n    this.message = xhr.statusText\n\n    /**\n    * Response data.\n    * @type {Mixed}\n    * @protected\n    */\n    this.data = xhr.response\n\n    if (typeof filter === 'function') {\n      this.data = filter(this.data)\n    }\n  }\n}\n\n// Exports\nexport default RequestResponsePayload\nexport { RequestResponsePayload }\n\n\n\n// WEBPACK FOOTER //\n// ./request/payload/response.js","import uuid from 'uuid/v4'\nimport requestSettings from './settings'\nimport requestEventTypes from './event/types'\nimport RequestEvent from './event/request'\nimport RequestProgressPayload from './payload/progress'\nimport RequestResponsePayload from './payload/response'\nimport RequestAttemptPayload from './payload/attempt'\n\n/**\n* `XMLHttpRequest` wrapper with `Promise` logic.\n*\n* @example\n* function on(event) {\n*   console.info('on:', event.type, event);\n* }\n*\n* new Request({\n*   url   : 'http://192.168.1.102/command',\n*   method: 'POST',\n*   data  : 'version\\n',\n*   on    : {\n*     'retry'            : on,\n*     'retry.send'       : on,\n*     'retry.limit'      : on,\n*\n*     'download.load'    : on,\n*     'download.error'   : on,\n*     'download.abort'   : on,\n*     'download.timeout' : on,\n*     'download.progress': on,\n*\n*     'upload.load'      : on,\n*     'upload.error'     : on,\n*     'upload.abort'     : on,\n*     'upload.timeout'   : on,\n*     'upload.progress'  : on\n*   },\n*   filters: {\n*     status  : status => status === 200,\n*     response: response => JSON.stringify(response)\n*   }\n* })\n* .send()\n* .then(event => {\n*   console.info('then:', event);\n* })\n* .catch(event => {\n*   console.error('catch:', event);\n* });\n*\n* @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\n* @see https://pouchdb.com/2015/05/18/we-have-a-problem-with-promises.html\n*/\nclass Request {\n  /**\n  * Encode data object to uri string `key_1=value_1&key_2=value_2`.\n  *\n  * @param  {Object<String, String>} data\n  * @return {String}\n  */\n  static encodeData(data) {\n    // no data\n    if (data) {\n      // stringify data object\n      if (typeof data === 'object') {\n        data = Object.keys(data).map(key => {\n          return encodeURIComponent(key) + '=' + encodeURIComponent(data[key])\n        }).join('&')\n      }\n\n      // remove the first char if it is an '?'\n      if (data.startsWith('?')) {\n        data = data.substr(1)\n      }\n    }\n\n    return data\n  }\n\n  /**\n  * Join data to url.\n  *\n  * @param  {String}                        url\n  * @param  {String|Object<String, String>} data\n  * @return {String}\n  */\n  static joinUrlData(url, data) {\n    return url + (url.indexOf('?') === -1 ? '?' : '&') + Request.encodeData(data)\n  }\n\n  /**\n  * @param {Object} settings See {@link src/request/settings.js~requestSettings} for defaults keys/values.\n  */\n  constructor(settings = {}) {\n    /**\n    * Request settings, see {@link src/request/settings.js~requestSettings} for defaults keys/values.\n    * @type {Object}\n    * @protected\n    */\n    this.settings = Object.assign({}, requestSettings, settings)\n\n    /**\n    * Unique identifier (uuid/v4).\n    * @type {String}\n    * @protected\n    */\n    this.uuid = uuid()\n\n    /**\n    * Creation time.\n    * @type {Integer}\n    * @protected\n    */\n    this.time = Date.now()\n\n    /**\n    * Send time.\n    * @type {Integer}\n    * @protected\n    */\n    this.sendTime = null\n\n    /**\n    * Elapsed time.\n    * @type {Integer}\n    * @protected\n    */\n    this.elapsedTime = null\n\n    /**\n    * Number of attempts.\n    * @type {Integer}\n    * @protected\n    */\n    this.attempts = 0\n\n    /**\n    * `XMLHttpRequest` instance.\n    * @type {XMLHttpRequest}\n    * @protected\n    */\n    this.xhr = null\n\n    /**\n    * Aborted flag.\n    * @type {Boolean}\n    * @protected\n    */\n    this.aborted = false\n  }\n\n  /**\n  * Trigger an user defined event.\n  *\n  * @throws {Error}\n  */\n  _triggerEvent(event) {\n    if (typeof this.settings.on[event.type] === 'function') {\n      this.settings.on[event.type](event)\n    }\n  }\n\n  /**\n  * Send the request and return a Promise.\n  *\n  * @return {Promise<RequestEvent>}\n  * @throws {Error}\n  */\n  _send() {\n    // prevent calling twice\n    if (this.xhr) {\n      throw new Error('You can not send the same request twice.')\n    }\n\n    // increment attempts counter\n    this.attempts++\n\n    // set send time\n    this.sendTime = Date.now()\n\n    // local settings\n    let settings = Object.assign({}, this.settings)\n\n    // normalize settings\n    settings.url    = settings.url.trim()\n    settings.method = settings.method.toUpperCase()\n    settings.data   = Request.encodeData(settings.data)\n\n    if (settings.method !== 'POST' && settings.data) {\n      // append data to uri and reset data\n      settings.url  = Request.joinUrlData(settings.url, settings.data)\n      settings.data = null\n    }\n\n    // wrap the request in promise\n    return new Promise((resolve, reject) => {\n      // create http request object\n      this.xhr = new XMLHttpRequest()\n\n      // override mime type\n      this.xhr.overrideMimeType(settings.mimeType)\n\n      // open async request\n      this.xhr.open(settings.method, settings.url, true)\n\n      // status\n      let rejected = false\n\n      // create, trigger and return an RequestEvent\n      let createEvent = (type, event, payload = null) => {\n        let requestEvent = new RequestEvent(type, event, this, payload)\n        ! rejected && this._triggerEvent(requestEvent)\n        return requestEvent\n      }\n\n      // on abort, error, timeout\n      let _reject = (type, event, error) => {\n        this.elapsedTime = Date.now() - this.sendTime\n        reject(createEvent(type, event, error instanceof Error ? error : new Error(error)))\n        rejected = true\n      }\n\n      let onAbort = (type, event) => {\n        this.aborted = true\n        _reject(type, event, 'Connection aborted.')\n      }\n\n      let onError = (type, event) => {\n        _reject(type, event, 'Unknown network error.')\n      }\n\n      let onTimeout = (type, event) => {\n        _reject(type, event, 'Connection timed out (>' + settings.timeout + 'ms).')\n      }\n\n      // on progress\n      let onProgress = (type, event) => {\n        createEvent(type, event, new RequestProgressPayload(event))\n      }\n\n      // on load\n      let onLoad = (type, event) => {\n        // check status\n        let status = this.xhr.status\n\n        if (! status) {\n          return _reject(requestEventTypes.DOWNLOAD_ERROR, event, 'Unknown HTTP error.')\n        }\n\n        // let user check the status\n        if (typeof settings.filters.status === 'function') {\n          status = settings.filters.status(status)\n        }\n\n        if (! status) {\n          return _reject(type, event, this.xhr.status + ' ' + this.xhr.statusText)\n        }\n\n        // response payload\n        let payload\n\n        try { // catch filter error\n          payload = new RequestResponsePayload(this.xhr, settings.filters.response)\n        }\n        catch (error) {\n          return _reject(type, event, error)\n        }\n\n        // set elapsed time\n        this.elapsedTime = Date.now() - this.sendTime\n\n        // resolve the promise\n        resolve(createEvent(type, event, payload))\n      }\n\n      let onUploaLoad = (type, event) => {\n        createEvent(type, event, settings.data)\n      }\n\n      // download events\n      this.xhr.onload     = event => onLoad(requestEventTypes.DOWNLOAD_LOAD, event)\n      this.xhr.onabort    = event => onAbort(requestEventTypes.DOWNLOAD_ABORT, event)\n      this.xhr.onerror    = event => onError(requestEventTypes.DOWNLOAD_ERROR, event)\n      this.xhr.ontimeout  = event => onTimeout(requestEventTypes.DOWNLOAD_TIMEOUT, event)\n      this.xhr.onprogress = event => onProgress(requestEventTypes.DOWNLOAD_PROGRESS, event)\n\n      // upload events\n      this.xhr.upload.onload     = event => onProgress(requestEventTypes.UPLOAD_LOAD, event)\n      this.xhr.upload.onabort    = event => onAbort(requestEventTypes.UPLOAD_ABORT, event)\n      this.xhr.upload.onerror    = event => onError(requestEventTypes.UPLOAD_ERROR, event)\n      this.xhr.upload.ontimeout  = event => onTimeout(requestEventTypes.UPLOAD_TIMEOUT, event)\n      this.xhr.upload.onprogress = event => onProgress(requestEventTypes.UPLOAD_PROGRESS, event)\n\n      // set request headers\n      if (settings.headers) {\n        for (let header in settings.headers) {\n          this.xhr.setRequestHeader(header, settings.headers[header])\n        }\n      }\n\n      // set request timeout\n      this.xhr.timeout = settings.timeout\n\n      // send the request\n      this.xhr.send(settings.data)\n\n      // dirty hack ...\n      if (this.aborted) {\n        this.xhr.abort()\n      }\n    })\n  }\n\n  /**\n  * Send the request and return a Promise.\n  *\n  * @return {Promise<RequestEvent>}\n  */\n  send() {\n    return this._send().catch(event => {\n      // trigger user callback\n      let triggerEvent = (type, event) => this._triggerEvent(\n        new RequestEvent(type, event.event, this, new RequestAttemptPayload(this))\n      )\n\n      // retry on timeout error if attempts limit is not reached\n      if (event.type.endsWith('timeout') || (event.type.endsWith('error') && event.payload.message.startsWith('Unknown network error'))) {\n        if (this.attempts < this.settings.maxAttempts) {\n          // call user callback\n          triggerEvent(requestEventTypes.BEFORE_RETRY, event)\n\n          // delayed retry\n          return new Promise((resolve, reject) => {\n            setTimeout(() => {\n              // reset xhr object\n              this.xhr = null\n\n              // call user callback\n              triggerEvent(requestEventTypes.RETRY, event)\n\n              // (re)send the request\n              return this.send().then(resolve).catch(reject)\n            }, this.settings.attemptDelay)\n          })\n        }\n\n        // call user callback\n        triggerEvent(requestEventTypes.RETRY_LIMIT, event)\n\n        let payload = new Error('Too many attempts (max: ' + this.attempts + ').')\n        event       = new RequestEvent(requestEventTypes.DOWNLOAD_ERROR, event.event, this, payload)\n      }\n\n      return Promise.reject(event)\n    })\n  }\n\n  /**\n  * Abort the this.\n  */\n  abort() {\n    this.aborted = true\n    this.xhr && this.xhr.abort()\n  }\n}\n\nexport default Request\nexport { Request }\n\n\n\n// WEBPACK FOOTER //\n// ./request/request.js","/**\n* Defaults request settings.\n* @type     {Object<String, Mixed>}\n* @property {String}   [url = '/']               Absolute or relative URL.\n* @property {String}   [method = 'GET']         'GET', 'POST', 'DELETE', ...\n* @property {Mixed}    [data = null]             Data to send with the request.\n* @property {Object}   [headers = {}]            Headers to send with the request.\n* @property {Integer}  [timeout = 5000]          Timeout for this request in milliseconds.\n* @property {Integer}  [maxAttempts = 5]         Maximum number of attemps before rejection.\n* @property {Integer}  [attemptDelay = 5000]     Delay in milliseconds between two attemps.\n* @property {String}   [mimeType = 'text/plain'] Expected response mime type.\n* @property {Object}   [on = {}]                 Collection of function that takes as single parameter an {@link RequestEvent} instance.\n*                                                Ex.: `{ 'download.load': event => { }, 'upload.progress': event => { } }`\n*                                                See {@link src/request/event/types.js} for possible values.\n* @property {Object}   [filters = {}]            Collection of filter functions.\n* @property {Function} [filters.status]          A function that takes as single parameter the request status code and return an boolean to resolve/reject the request.\n* @property {Function} [filters.response]        A function that takes as single parameter the request response and return a new version or throw an {@link Error} to reject the {@link Promise}.\n*/\nconst requestSettings = {\n  url         : '/',\n  method      : 'GET',\n  data        : null,\n  headers     : {},\n  timeout     : 1000,\n  maxAttempts : 5,\n  attemptDelay: 0,\n  mimeType    : 'text/plain',\n  filters     : {},\n  on          : {}\n}\n\nexport default requestSettings\nexport { requestSettings }\n\n\n\n// WEBPACK FOOTER //\n// ./request/settings.js","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  return  bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\nmodule.exports = bytesToUuid;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/uuid/lib/bytesToUuid.js\n// module id = 42\n// module chunks = 0","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\nvar rng;\n\nvar crypto = global.crypto || global.msCrypto; // for IE 11\nif (crypto && crypto.getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16);\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(rnds8);\n    return rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var  rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n\nmodule.exports = rng;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/uuid/lib/rng-browser.js\n// module id = 43\n// module chunks = 0","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/webpack/buildin/global.js\n// module id = 44\n// module chunks = 0"],"sourceRoot":""}